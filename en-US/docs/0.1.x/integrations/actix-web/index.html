<!DOCTYPE html>
<html lang="en" class="light">
    <head>
<base href="https://arctic-hen7.github.io/perseus/" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href=".perseus/static/tailwind.css" />
        <link rel="stylesheet" href=".perseus/static/styles/style.css" />
    <script>window.__PERSEUS_RENDER_CFG = '{"docs/0.3.x/ejecting":"docs","docs/deploying/size":"docs","docs/0.2.x/i18n/defining":"docs","docs/ejecting":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/next/plugins/publishing":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.2.x/views":"docs","docs/plugins/functional":"docs","docs/0.3.x/testing/checkpoints":"docs","docs/0.3.x/error-pages":"docs","docs/0.2.x/styling":"docs","plugins":"plugins","docs/0.2.x/second-app":"docs","comparisons":"comparisons","docs/next/strategies/amalgamation":"docs","docs/0.3.x/exporting":"docs","docs/second-app":"docs","docs/next/stores":"docs","docs/next/exporting":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/next/ejecting":"docs","docs/0.3.x/intro":"docs","docs/next/testing/manual":"docs","docs/0.3.x/snooping":"docs","docs/next/i18n/defining":"docs","docs/0.3.x/pitfalls-and-bugs":"docs","docs/0.3.x/deploying/size":"docs","docs/0.3.x/views":"docs","docs/0.1.x/intro":"docs","docs/0.2.x/updating":"docs","docs/deploying/intro":"docs","docs/0.3.x/advanced/intro":"docs","docs/strategies/incremental":"docs","docs/next/styling":"docs","docs/0.3.x/plugins/using":"docs","docs/next/deploying/relative-paths":"docs","docs/0.3.x/what-is-perseus":"docs","docs/0.3.x/templates/intro":"docs","docs/deploying/relative-paths":"docs","docs/next/testing/fantoccini-basics":"docs","docs/next/views":"docs","docs/advanced/subsequent-loads":"docs","docs/0.2.x/testing/intro":"docs","docs/intro":"docs","docs/0.2.x/i18n/intro":"docs","docs/updating":"docs","docs/0.3.x/strategies/request-state":"docs","docs/0.3.x/strategies/amalgamation":"docs","docs/strategies/request-state":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.3.x/deploying/serverless":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/strategies/amalgamation":"docs","docs/next/testing/intro":"docs","docs/0.2.x/static-content":"docs","docs/next/advanced/arch":"docs","docs/0.2.x/strategies/intro":"docs","docs/strategies/build-paths":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.3.x/templates/metadata-modification":"docs","docs/next/cli":"docs","docs/templates/intro":"docs","docs/static-content":"docs","docs/next/updating":"docs","docs/next/plugins/functional":"docs","docs/0.3.x/strategies/revalidation":"docs","docs/0.3.x/updating":"docs","docs/0.1.x/routing":"docs","docs/next/strategies/request-state":"docs","docs/styling":"docs","docs/0.1.x/strategies/intro":"docs","docs/next/plugins/security":"docs","docs":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/next/define-app":"docs","docs/testing/intro":"docs","docs/i18n/translations-managers":"docs","docs/next/server-communication":"docs","docs/i18n/using":"docs","docs/next/deploying/serverful":"docs","docs/templates/setting-headers":"docs","docs/next/strategies/build-state":"docs","docs/next/pitfalls-and-bugs":"docs","docs/0.3.x/second-app":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/plugins/tinker":"docs","docs/cli":"docs","docs/0.3.x/templates/setting-headers":"docs","docs/0.3.x/i18n/other-engines":"docs","docs/0.2.x/intro":"docs","docs/0.2.x/error-pages":"docs","index":"index","docs/0.1.x/integrations/actix-web":"docs","docs/0.3.x/stores":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.3.x/strategies/incremental":"docs","docs/next/strategies/incremental":"docs","docs/0.1.x/setup":"docs","docs/0.3.x/plugins/publishing":"docs","docs/next/advanced/subsequent-loads":"docs","docs/next/plugins/tinker":"docs","docs/0.3.x/advanced/routing":"docs","docs/advanced/routing":"docs","docs/next/i18n/using":"docs","docs/next/deploying/size":"docs","docs/next/plugins/control":"docs","docs/0.3.x/advanced/subsequent-loads":"docs","docs/0.3.x/plugins/functional":"docs","docs/0.3.x/i18n/intro":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.2.x/strategies/request-state":"docs","docs/plugins/control":"docs","docs/advanced/initial-loads":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/next/snooping":"docs","docs/next/i18n/other-engines":"docs","docs/deploying/serverful":"docs","docs/hydration":"docs","docs/0.3.x/styling":"docs","docs/0.3.x/strategies/build-paths":"docs","docs/strategies/build-state":"docs","docs/0.3.x/static-content":"docs","docs/0.2.x/advanced/routing":"docs","docs/next/second-app":"docs","docs/0.3.x/deploying/serverful":"docs","docs/next/templates/setting-headers":"docs","docs/what-is-perseus":"docs","docs/0.3.x/plugins/tinker":"docs","docs/define-app":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/next/plugins/using":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/hello-world":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.3.x/advanced/arch":"docs","docs/plugins/security":"docs","docs/0.3.x/plugins/control":"docs","docs/0.3.x/advanced/initial-loads":"docs","docs/views":"docs","docs/next/static-content":"docs","docs/0.3.x/deploying/relative-paths":"docs","docs/0.3.x/hello-world":"docs","docs/0.3.x/define-app":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.x/plugins/writing":"docs","docs/0.3.x/server-communication":"docs","docs/0.1.x/arch":"docs","docs/0.3.x/cli":"docs","docs/next/testing/checkpoints":"docs","docs/exporting":"docs","docs/next/advanced/intro":"docs","docs/deploying/serverless":"docs","docs/debugging":"docs","docs/error-pages":"docs","docs/0.2.x/define-app":"docs","docs/next/templates/metadata-modification":"docs","docs/0.3.x/strategies/intro":"docs","docs/snooping":"docs","docs/next/debugging":"docs","docs/advanced/arch":"docs","docs/0.3.x/i18n/translations-managers":"docs","docs/0.2.x/testing/manual":"docs","docs/testing/checkpoints":"docs","docs/plugins/writing":"docs","docs/next/strategies/intro":"docs","docs/next/advanced/routing":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.3.x/deploying/intro":"docs","docs/0.3.x/debugging":"docs","docs/next/plugins/writing":"docs","docs/0.2.x/config-managers":"docs","docs/testing/manual":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.1.x/config_managers":"docs","docs/0.3.x/testing/intro":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/plugins/using":"docs","docs/next/advanced/initial-loads":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/0.1.x/building":"docs","docs/next/hello-world":"docs","docs/plugins/publishing":"docs","docs/0.2.x/templates/intro":"docs","docs/0.3.x/testing/manual":"docs","docs/0.3.x/i18n/using":"docs","docs/0.1.x/serving":"docs","docs/0.2.x/ejecting":"docs","docs/i18n/defining":"docs","docs/next/deploying/serverless":"docs","docs/0.2.x/cli":"docs","docs/pitfalls-and-bugs":"docs","docs/next/strategies/revalidation":"docs","docs/next/i18n/intro":"docs","docs/next/deploying/intro":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.2.x/i18n/using":"docs","docs/stores":"docs","docs/next/hydration":"docs","docs/next/intro":"docs","docs/0.3.x/plugins/intro":"docs","docs/plugins/intro":"docs","docs/server-communication":"docs","docs/0.3.x/hydration":"docs","docs/0.3.x/plugins/security":"docs","docs/next/what-is-perseus":"docs","docs/0.3.x/strategies/build-state":"docs","docs/templates/metadata-modification":"docs","docs/next/error-pages":"docs","docs/next/plugins/intro":"docs","docs/i18n/intro":"docs","docs/0.3.x/testing/fantoccini-basics":"docs","docs/0.1.x/strategies/build_state":"docs","docs/next/i18n/translations-managers":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.3.x/i18n/defining":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/advanced/intro":"docs","docs/0.1.x/templates":"docs","docs/strategies/intro":"docs","docs/next/advanced/define_app":"docs","docs/0.2.x/hello-world":"docs","docs/strategies/revalidation":"docs","docs/0.2.x/advanced/arch":"docs","docs/next/strategies/build-paths":"docs","docs/0.1.x/cli":"docs","docs/0.2.x/deploying/intro":"docs","docs/testing/fantoccini-basics":"docs","docs/next/templates/intro":"docs","docs/i18n/other-engines":"docs","docs/0.2.x/debugging":"docs","docs/0.1.x/error_pages":"docs"}';</script>
<script type="module">
    import init, { run } from "https://arctic-hen7.github.io/perseus/.perseus/bundle.js";
    async function main() {
        await init("https://arctic-hen7.github.io/perseus/.perseus/bundle.wasm");
        run();
    }
    main();
</script>
<!--PERSEUS_INTERPOLATED_HEAD_BEGINS--><title data-hk="1.0">Actix Web Integration | Perseus Docs</title><link href=".perseus/static/styles/markdown.css" rel="stylesheet" data-hk="1.1"/><link href=".perseus/static/styles/docs_links_markdown.css" data-hk="1.2" rel="stylesheet"/><link data-hk="1.3" rel="stylesheet" href=".perseus/static/prism.css"/>
<script>window.__PERSEUS_INITIAL_STATE = `{"title":"Actix Web Integration","content":"<h1>Actix Web Integration</h1>\\n<p>If you're using <a href=\\"https://actix.rs\\">Actix Web</a>, then Perseus can automate nearly all the boilerplate of serving your app for you!</p>\\n<p>This integration provides a configuration function, which you can use to configure an existing web server to support Perseus, so you could even run something like <a href=\\"https://github.com/arctic-hen7/diana\\">Diana</a> on the same server!</p>\\n<p>This integration should support almost every use case of Perseus, but there may be some extremely advanced things that you'll need to go back to basics for. If that's the case, please let us know by <a href=\\"\\">opening an issue</a> (we want these integrations to be as powerful as possible), and in the meantime you can use the guide <a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/serving\\">here</a> to see how to set up a server without using the integrations. If you need implementation details, check out the actual source code for the integration in the <a href=\\"https://github.com/arctic-hen7/perseus\\">repository</a>.</p>\\n<h2>Installation</h2>\\n<p>You can install the Actix Web integration by adding the following to your <code>Cargo.toml</code> under the <code>dependencies</code> section:</p>\\n<pre><code class=\\"language-toml\\">perseus-actix-web = &quot;0.1&quot;\\n</code></pre>\\n<p>Note that you will still need <code>actix-web</code>, <code>futures</code>, and <code>perseus</code> itself, even in a server repository.</p>\\n<p>All Perseus integrations follow the same version format as the core library, meaning they're all updated simultaneously. This makes version management much easier, and it means that you can just install the same version of every Perseus package and not have to worry about compatibility issues.</p>\\n<h2>Usage</h2>\\n<p>This is an example of a web server that only uses Perseus, but you can call <code>.configure()</code> on any existing web server. Note though that <strong>Perseus must be configured after all other logic</strong>, because it adds a generic handler for all remaining pages, which will break other more specific logic that comes after it.</p>\\n<pre><code class=\\"language-rust,no_run\\">use perseus::{FsConfigManager, SsrNode};\\nuse perseus_actix_web::{configurer, Options};\\nuse perseus_showcase_app::pages;\\nuse actix_web::{HttpServer, App};\\nuse futures::executor::block_on;\\n\\n#[actix_web::main]\\nasync fn main() -&gt; std::io::Result&lt;()&gt; {\\n\\tHttpServer::new(|| {\\n        App::new()\\n\\t\\t\\t// Other server logic here\\n        \\t.configure(\\n\\t\\t\\t\\tblock_on(configurer(\\n\\t\\t\\t\\t\\tOptions {\\n\\t\\t\\t\\t\\t\\tindex: &quot;../app/index.html&quot;.to_string(),\\n\\t\\t\\t\\t\\t\\tjs_bundle: &quot;../app/pkg/bundle.js&quot;.to_string(),\\n\\t\\t\\t\\t\\t\\twasm_bundle: &quot;../app/pkg/perseus_showcase_app_bg.wasm&quot;.to_string(),\\n\\t\\t\\t\\t\\t\\ttemplates_map: pages::get_templates_map::&lt;SsrNode&gt;()\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tFsConfigManager::new()\\n\\t\\t\\t\\t))\\n\\t\\t\\t)\\n    })\\n    \\t.bind((&quot;localhost&quot;, 8080))?\\n    \\t.run()\\n    \\t.await\\n}\\n</code></pre>\\n<p>When you use the integration, you'll have to define a few options to tell it what exactly to serve. Specifically, you'll need to tell it where your <code>index.html</code> file, your JS bundle, and your Wasm bundle all are. In addition, you'll need to a provide it with a template map (which you'll often define a getter function for as above).</p>\\n<p>Also, because this plugs into an existing server, you have full control over hosting options, like the port to be used!</p>\\n<p>It's worth mentioning the blocking component of this design. The function that returns the closure that actually configures your server for Perseus is asynchronous because it needs to get your render configuration and add it as data to the server (this improves performance by reducing reads), which unfortunately is an asynchronous operation. We also can't <code>.await</code> that without causing ownership errors due to Actix Web's closure structure, which means the best solution for now is to <code>block_on</code> that configuration (which won't impact performance other than in your startup times, and all that's happening is a read from a file). If you have a better solution, <a href=\\"https://github.com/arctic-hen7/pulls\\">PRs are welcome</a>!</p>\\n","sidebar_content":"<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/intro\\">Introduction</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/setup\\">Setup</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/arch\\">Architecture</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/intro\\">Building Your First App</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/setup\\">Installation and Setup</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/template\\">Writing Your First Template</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/app\\">Setting up the App Itself</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/cli\\">CLI</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/templates\\">Templates</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/routing\\">Routing</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/error_pages\\">Error Pages</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_paths\\">Build Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_state\\">Build State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/request_state\\">Request State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/incremental\\">Incremental generation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/building\\">Building</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/serving\\">Serving</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/integrations/actix-web\\">Actix Web Integration</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/config_managers\\">Config Managers</a></li>\\n</ul>\\n","status":"Outdated","manifest":{"stable":"0.3.x","outdated":["0.2.x","0.1.x"],"beta":[],"history_map":{"0.1.x":"v0.1.4","0.3.x":"HEAD","0.2.x":"v0.2.3"}},"current_version":"0.1.x"}`;</script>
</head>
    <body class="bg-white dark:bg-navy">
        <div id="root"><div id="__perseus_content_initial" class="__perseus_content"><header class="shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20" data-hk="3.0"><div class="flex justify-between" data-hk="3.1"><a href="en-US/" data-hk="3.2" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl">Perseus</a><div class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 " data-hk="3.3"><div data-hk="3.4" class="tham-box"><div class="dark:bg-white tham-inner" data-hk="3.5"></div></div></div><nav class="hidden md:flex" data-hk="3.6"><ul data-hk="3.7" class="mr-5 flex"><li data-hk="4.0" class="m-3 p-1"><a data-hk="4.1" href="en-US/docs" class="px-2">Docs</a></li><li class="m-3 p-1" data-hk="4.2"><a href="en-US/comparisons" class="px-2" data-hk="4.3">Comparisons</a></li><li data-hk="4.4" class="m-3 p-1"><a class="px-2" data-hk="4.5" href="en-US/plugins">Plugins</a></li></ul></nav></div><nav class="md:hidden w-full text-center justify-center overflow-y-scroll hidden" id="mobile_nav_menu" data-hk="3.8"><div data-hk="3.9" class="mr-5 overflow-y-scroll" style="max-height: 500px"><ul data-hk="3.10"><li data-hk="5.0" class="m-3 p-1"><a href="en-US/docs" class="px-2" data-hk="5.1">Docs</a></li><li data-hk="5.2" class="m-3 p-1"><a class="px-2" data-hk="5.3" href="en-US/comparisons">Comparisons</a></li><li class="m-3 p-1" data-hk="5.4"><a data-hk="5.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul><hr data-hk="3.11"/><div class="text-left p-3" data-hk="3.12"><!--#--><!----><select class="p-2 rounded-md text-white bg-indigo-500" data-hk="6.0"><option value="next" data-hk="6.1">Next (unreleased)</option><!--#--><!--/--><option value="0.3.x" data-hk="6.2">v⁨0.3.x⁩ (stable)</option><!--#--><option value="0.2.x" data-hk="6.3">v⁨0.2.x⁩ (outdated)</option><option value="0.1.x" data-hk="6.4" selected="">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.13" class="docs-links-markdown"><ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/intro">Introduction</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/setup">Setup</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/intro">Building Your First App</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/setup">Installation and Setup</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/template">Writing Your First Template</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/app">Setting up the App Itself</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/cli">CLI</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/templates">Templates</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/routing">Routing</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/error_pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/request_state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/incremental">Incremental generation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/building">Building</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/serving">Serving</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/integrations/actix-web">Actix Web Integration</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/config_managers">Config Managers</a></li>
</ul>
</div></div></div></nav></header><div class="mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex" data-hk="3.14"><div data-hk="3.15" class="flex w-full"><div data-hk="3.16" class="h-full hidden md:block max-w-xs w-full border-r"><div class="mr-5" data-hk="3.17"><div data-hk="3.18" class="text-left text-black dark:text-white p-3"><aside data-hk="3.19"><!--#--><!----><select class="p-2 rounded-md text-white bg-indigo-500" data-hk="7.0"><option data-hk="7.1" value="next">Next (unreleased)</option><!--#--><!--/--><option value="0.3.x" data-hk="7.2">v⁨0.3.x⁩ (stable)</option><!--#--><option data-hk="7.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option data-hk="7.4" selected="" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div class="docs-links-markdown" data-hk="3.20"><ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/intro">Introduction</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/setup">Setup</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/intro">Building Your First App</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/setup">Installation and Setup</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/template">Writing Your First Template</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/tutorials/first_app/app">Setting up the App Itself</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/cli">CLI</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/templates">Templates</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/routing">Routing</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/error_pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/build_state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/request_state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/strategies/incremental">Incremental generation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/building">Building</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/serving">Serving</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/integrations/actix-web">Actix Web Integration</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/config_managers">Config Managers</a></li>
</ul>
</div></aside></div></div></div><div class="h-full flex w-full" data-hk="3.21"><div class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl" data-hk="3.22"><!--#--><div class="ring-4 ring-red-400 p-4 rounded-lg mt-1" data-hk="3.23"><div class="flex flex-col 2xs:flex-row dark:text-white" data-hk="3.24"><span class="self-center mr-2" data-hk="3.25" style="fill: #f87171;"><svg xmlns="http://www.w3.org/2000/svg" height="auto" viewBox="0 0 24 24" width="2.25rem" fill="\#000000"><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk="3.26">This version of the documentation is outdated, and features documented here may work differently now. You can see the latest stable version of the docs <a href="en-US/docs/0.3.x/intro" class="underline">here</a>.</p></div></div><!--/--><main data-hk="3.27" class="text-black dark:text-white"><div data-hk="2.0" class="markdown"><h1>Actix Web Integration</h1>
<p>If you're using <a href="https://actix.rs">Actix Web</a>, then Perseus can automate nearly all the boilerplate of serving your app for you!</p>
<p>This integration provides a configuration function, which you can use to configure an existing web server to support Perseus, so you could even run something like <a href="https://github.com/arctic-hen7/diana">Diana</a> on the same server!</p>
<p>This integration should support almost every use case of Perseus, but there may be some extremely advanced things that you'll need to go back to basics for. If that's the case, please let us know by <a href="">opening an issue</a> (we want these integrations to be as powerful as possible), and in the meantime you can use the guide <a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.1.x/serving">here</a> to see how to set up a server without using the integrations. If you need implementation details, check out the actual source code for the integration in the <a href="https://github.com/arctic-hen7/perseus">repository</a>.</p>
<h2>Installation</h2>
<p>You can install the Actix Web integration by adding the following to your <code>Cargo.toml</code> under the <code>dependencies</code> section:</p>
<pre><code class="language-toml">perseus-actix-web = &quot;0.1&quot;
</code></pre>
<p>Note that you will still need <code>actix-web</code>, <code>futures</code>, and <code>perseus</code> itself, even in a server repository.</p>
<p>All Perseus integrations follow the same version format as the core library, meaning they're all updated simultaneously. This makes version management much easier, and it means that you can just install the same version of every Perseus package and not have to worry about compatibility issues.</p>
<h2>Usage</h2>
<p>This is an example of a web server that only uses Perseus, but you can call <code>.configure()</code> on any existing web server. Note though that <strong>Perseus must be configured after all other logic</strong>, because it adds a generic handler for all remaining pages, which will break other more specific logic that comes after it.</p>
<pre><code class="language-rust,no_run">use perseus::{FsConfigManager, SsrNode};
use perseus_actix_web::{configurer, Options};
use perseus_showcase_app::pages;
use actix_web::{HttpServer, App};
use futures::executor::block_on;

#[actix_web::main]
async fn main() -&gt; std::io::Result&lt;()&gt; {
	HttpServer::new(|| {
        App::new()
			// Other server logic here
        	.configure(
				block_on(configurer(
					Options {
						index: &quot;../app/index.html&quot;.to_string(),
						js_bundle: &quot;../app/pkg/bundle.js&quot;.to_string(),
						wasm_bundle: &quot;../app/pkg/perseus_showcase_app_bg.wasm&quot;.to_string(),
						templates_map: pages::get_templates_map::&lt;SsrNode&gt;()
					},
					FsConfigManager::new()
				))
			)
    })
    	.bind((&quot;localhost&quot;, 8080))?
    	.run()
    	.await
}
</code></pre>
<p>When you use the integration, you'll have to define a few options to tell it what exactly to serve. Specifically, you'll need to tell it where your <code>index.html</code> file, your JS bundle, and your Wasm bundle all are. In addition, you'll need to a provide it with a template map (which you'll often define a getter function for as above).</p>
<p>Also, because this plugs into an existing server, you have full control over hosting options, like the port to be used!</p>
<p>It's worth mentioning the blocking component of this design. The function that returns the closure that actually configures your server for Perseus is asynchronous because it needs to get your render configuration and add it as data to the server (this improves performance by reducing reads), which unfortunately is an asynchronous operation. We also can't <code>.await</code> that without causing ownership errors due to Actix Web's closure structure, which means the best solution for now is to <code>block_on</code> that configuration (which won't impact performance other than in your startup times, and all that's happening is a read from a file). If you have a better solution, <a href="https://github.com/arctic-hen7/pulls">PRs are welcome</a>!</p>
</div></main></div></div></div></div><footer data-hk="3.28" class="w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep"><p data-hk="3.29" class="dark:text-white mx-5 text-center"><span data-hk="3.30">© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> ⁨2021⁩, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer><script data-hk="2.1" src=".perseus/static/prism.js" defer=""></script><script data-hk="2.2">window.Prism.highlightAll();</script></div></div>
    </body>
</html>
