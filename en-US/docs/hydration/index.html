<!DOCTYPE html>
<html lang="en" class="light">
    <head>
<base href="https://arctic-hen7.github.io/perseus/" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href=".perseus/static/tailwind.css" />
        <link rel="stylesheet" href=".perseus/static/styles/style.css" />
    <script>window.__PERSEUS_RENDER_CFG = '{"docs/next/static-content":"docs","docs/views":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/hello-world":"docs","docs/0.2.x/deploying/exporting":"docs","docs/debugging":"docs","docs/0.3.x/plugins/using":"docs","docs/intro":"docs","docs/advanced/arch":"docs","docs/next/testing/checkpoints":"docs","docs/0.2.x/ejecting":"docs","docs/0.1.x/serving":"docs","docs/next/hydration":"docs","docs/0.2.x/styling":"docs","docs/0.2.x/testing/intro":"docs","docs/error-pages":"docs","docs/0.3.x/strategies/incremental":"docs","docs/next/plugins/writing":"docs","docs/0.3.x/strategies/revalidation":"docs","docs/testing/manual":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.2.x/advanced/routing":"docs","docs/0.3.x/testing/fantoccini-basics":"docs","docs/next/plugins/publishing":"docs","docs/plugins/publishing":"docs","docs/0.2.x/config-managers":"docs","docs/plugins/intro":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.3.x/styling":"docs","docs/0.3.x/advanced/intro":"docs","docs/0.3.x/plugins/writing":"docs","docs/0.1.x/arch":"docs","docs/what-is-perseus":"docs","docs/next/templates/setting-headers":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/advanced/initial-loads":"docs","docs/strategies/revalidation":"docs","docs/strategies/build-paths":"docs","docs/next/testing/manual":"docs","docs/0.2.x/updating":"docs","docs/exporting":"docs","docs/next/i18n/using":"docs","docs/0.2.x/i18n/using":"docs","docs/0.3.x/strategies/build-paths":"docs","docs/0.3.x/updating":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/0.2.x/static-content":"docs","docs/0.3.x/templates/intro":"docs","docs/next/testing/fantoccini-basics":"docs","docs/next/plugins/functional":"docs","docs/0.3.x/snooping":"docs","docs/0.1.x/building":"docs","docs/next/deploying/relative-paths":"docs","docs/advanced/routing":"docs","docs/0.3.x/ejecting":"docs","docs/0.3.x/i18n/other-engines":"docs","docs/0.3.x/plugins/tinker":"docs","docs/i18n/using":"docs","docs/deploying/size":"docs","docs/0.2.x/error-pages":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/next/views":"docs","docs/next/stores":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/next/plugins/using":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/strategies/build-state":"docs","docs/ejecting":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/0.1.x/error_pages":"docs","docs/second-app":"docs","docs/strategies/intro":"docs","docs/testing/checkpoints":"docs","docs/next/strategies/build-state":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.2.x/advanced/arch":"docs","docs/server-communication":"docs","docs/next/i18n/other-engines":"docs","docs/0.3.x/i18n/translations-managers":"docs","docs/strategies/incremental":"docs","docs/0.1.x/setup":"docs","docs/deploying/serverless":"docs","docs/deploying/intro":"docs","docs/0.3.x/static-content":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.2.x/second-app":"docs","docs/next/deploying/serverless":"docs","docs/static-content":"docs","plugins":"plugins","docs/next/i18n/defining":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.3.x/i18n/using":"docs","docs/next/strategies/revalidation":"docs","docs/next/advanced/routing":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.1.x/intro":"docs","docs/next/strategies/build-paths":"docs","docs/plugins/writing":"docs","index":"index","docs/0.3.x/exporting":"docs","docs/deploying/serverful":"docs","docs/next/strategies/intro":"docs","docs/next/plugins/intro":"docs","docs/0.3.x/intro":"docs","docs/0.3.x/templates/setting-headers":"docs","docs/0.3.x/strategies/intro":"docs","docs/0.3.x/what-is-perseus":"docs","docs/next/advanced/subsequent-loads":"docs","docs/0.3.x/deploying/relative-paths":"docs","docs/updating":"docs","docs/plugins/functional":"docs","docs/0.3.x/plugins/intro":"docs","docs/0.3.x/stores":"docs","docs/snooping":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.3.x/templates/metadata-modification":"docs","docs/deploying/relative-paths":"docs","docs/0.3.x/views":"docs","docs/next/advanced/arch":"docs","docs/0.2.x/debugging":"docs","docs/next/styling":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/plugins/security":"docs","docs/advanced/subsequent-loads":"docs","docs/0.1.x/config_managers":"docs","docs/0.3.x/debugging":"docs","docs/0.3.x/error-pages":"docs","docs/next/updating":"docs","docs/next/templates/intro":"docs","docs/next/snooping":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/next/templates/metadata-modification":"docs","docs/i18n/intro":"docs","docs/0.2.x/deploying/intro":"docs","docs/next/strategies/incremental":"docs","docs/0.3.x/advanced/arch":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/define-app":"docs","docs/pitfalls-and-bugs":"docs","comparisons":"comparisons","docs/i18n/defining":"docs","docs/next/deploying/size":"docs","docs/0.3.x/cli":"docs","docs/0.1.x/routing":"docs","docs/next/hello-world":"docs","docs/next/define-app":"docs","docs/testing/intro":"docs","docs/0.1.x/strategies/intro":"docs","docs/advanced/intro":"docs","docs/next/cli":"docs","docs/stores":"docs","docs/0.3.x/i18n/defining":"docs","docs/0.2.x/templates/intro":"docs","docs/plugins/tinker":"docs","docs/0.3.x/plugins/functional":"docs","docs/0.3.x/deploying/serverless":"docs","docs/0.3.x/strategies/build-state":"docs","docs/next/exporting":"docs","docs/0.3.x/hello-world":"docs","docs/next/pitfalls-and-bugs":"docs","docs/0.3.x/testing/intro":"docs","docs/next/testing/intro":"docs","docs/next/ejecting":"docs","docs/0.3.x/server-communication":"docs","docs/next/advanced/initial-loads":"docs","docs/0.3.x/plugins/publishing":"docs","docs/0.3.x/deploying/intro":"docs","docs/templates/setting-headers":"docs","docs/0.2.x/views":"docs","docs/0.3.x/pitfalls-and-bugs":"docs","docs/0.3.x/hydration":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.3.x/second-app":"docs","docs/next/strategies/amalgamation":"docs","docs/0.3.x/advanced/routing":"docs","docs/0.3.x/advanced/subsequent-loads":"docs","docs/next/error-pages":"docs","docs/0.3.x/strategies/request-state":"docs","docs/0.3.x/testing/checkpoints":"docs","docs":"docs","docs/plugins/using":"docs","docs/0.2.x/testing/manual":"docs","docs/hydration":"docs","docs/0.1.x/strategies/request_state":"docs","docs/plugins/control":"docs","docs/next/what-is-perseus":"docs","docs/cli":"docs","docs/0.3.x/strategies/amalgamation":"docs","docs/templates/intro":"docs","docs/0.1.x/cli":"docs","docs/0.2.x/intro":"docs","docs/next/advanced/intro":"docs","docs/0.2.x/strategies/request-state":"docs","docs/0.3.x/i18n/intro":"docs","docs/0.2.x/hello-world":"docs","docs/i18n/translations-managers":"docs","docs/next/debugging":"docs","docs/next/plugins/tinker":"docs","docs/templates/metadata-modification":"docs","docs/0.3.x/testing/manual":"docs","docs/0.1.x/strategies/incremental":"docs","docs/next/strategies/request-state":"docs","docs/0.1.x/templates":"docs","docs/0.3.x/advanced/initial-loads":"docs","docs/0.3.x/plugins/security":"docs","docs/0.3.x/deploying/size":"docs","docs/next/deploying/intro":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/0.2.x/strategies/build-state":"docs","docs/i18n/other-engines":"docs","docs/next/i18n/translations-managers":"docs","docs/next/server-communication":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/0.3.x/define-app":"docs","docs/next/i18n/intro":"docs","docs/next/deploying/serverful":"docs","docs/testing/fantoccini-basics":"docs","docs/0.3.x/deploying/serverful":"docs","docs/0.2.x/cli":"docs","docs/strategies/request-state":"docs","docs/next/second-app":"docs","docs/0.1.x/strategies/build_state":"docs","docs/strategies/amalgamation":"docs","docs/styling":"docs","docs/0.3.x/plugins/control":"docs","docs/0.2.x/define-app":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/next/plugins/security":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/next/plugins/control":"docs","docs/next/intro":"docs"}';</script>
<script type="module">
    import init, { run } from "https://arctic-hen7.github.io/perseus/.perseus/bundle.js";
    async function main() {
        await init("https://arctic-hen7.github.io/perseus/.perseus/bundle.wasm");
        run();
    }
    main();
</script>
<!--PERSEUS_INTERPOLATED_HEAD_BEGINS--><title data-hk="1.0">Hydration | Perseus Docs</title><link href=".perseus/static/styles/markdown.css" data-hk="1.1" rel="stylesheet"/><link rel="stylesheet" href=".perseus/static/styles/docs_links_markdown.css" data-hk="1.2"/><link rel="stylesheet" href=".perseus/static/prism.css" data-hk="1.3"/>
<script>window.__PERSEUS_INITIAL_STATE = `{"title":"Hydration","content":"<h1>Hydration</h1>\\n<p>In the examples of <code>Cargo.toml</code> files shown thus far, we've enabled a feature called <code>hydrate</code> on Perseus. This feature controls <em>hydration</em>, which is a way of making your app more performant. To explain it, we'll need to go a little in-depth.</p>\\n<p>Perseus uses server-side rendering of some kind for almost everything. In fact, unless you explicitly make something only run in the browser, Perseus will try to prerender it on the server first, either at build-time (faster, so Perseus does this for everything it can) or at request-time. This prerendering process yields a series of HTML and JSON fiels that make up the markup and state of your app. When a page is requested by a user, Perseus can serve them these files, and then the app shell (the Wasm code that runs everything in a Perseus app in the browser) will bring everything to life.</p>\\n<p>Those prerendered files can be imagined as solid iron, but, to make your app work, we need molten iron. In the real world, you need a lot of heat to turn iron into a liquid, and you need a lot of code to turn simple markup into interactive buttons and text in a browser! So, let's go through the metaphor a bit more: the build process and server are the miners that fetch all the iron out of the mines of the tempalte code you write. Then, that iron is sent to the user's browser, and the app shell does <em>something</em> to get molten iron that can be used to run your app.</p>\\n<p>Without hydration, the app shell will kindly thank the server for sending it the solid iron, and will then proceed to mine more of its own. In other words, the app shell will completely ignore the prerendered files that the server has sent (displaying them only until it's ready, which is why Perseus apps still work without JavaScript!).</p>\\n<p>But with hydration, the app shell can intelligently melt the iron that it's been given, it can <em>hydrate</em> the simple markdown. Using hydration is generally much faster than not using hydration, though it's also very hard to implement! Hydration is done by Sycamore, and it's still experimental right now, so it's opt-in with Perseus. You can use the <code>hydrate</code> feature flag to enable it in any Perseus app, though you should be aware that there's a chance that things may break in very strange ways! If this happens, try disabling hydration.</p>\\n<h2>Performance Costs of Disabling Hydration</h2>\\n<p>Not using hydration will impact your site's performance when the user first loads a page (moving around within the app is no problem), because the browser has to do a little more work, but it also has to completely re-display your site. The difference shouldn't be visible to users at all unless they try to scroll as soon as your site loads (as in within less than half a second on modern machines), in which case they'll be thrown back to the top of the site. However, Lighthouse doesn't seem to notice any differences, so your scores there won't change!</p>\\n<p>Notably, to make hydration better for the community, you should file any bugs about hydration on <a href=\\"https://github.com/sycamore-rs/sycamore\\">the Sycamore repository</a>.</p>\\n","sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app\\"><code>define_app!</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views\\">Writing Views</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling\\">Styling</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores\\">Stores</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths\\">Relative Paths</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating\\">Migrating from v0.2.x</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n</ul>\\n","status":"Stable","manifest":{"stable":"0.3.x","outdated":["0.2.x","0.1.x"],"beta":[],"history_map":{"0.1.x":"v0.1.4","0.2.x":"v0.2.3","0.3.x":"HEAD"}},"current_version":"0.3.x"}`;</script>
</head>
    <body class="bg-white dark:bg-navy">
        <div id="root"><div id="__perseus_content_initial" class="__perseus_content"><header class="shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20" data-hk="3.0"><div class="flex justify-between" data-hk="3.1"><a href="en-US/" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl" data-hk="3.2">Perseus</a><div data-hk="3.3" class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 "><div data-hk="3.4" class="tham-box"><div class="dark:bg-white tham-inner" data-hk="3.5"></div></div></div><nav data-hk="3.6" class="hidden md:flex"><ul data-hk="3.7" class="mr-5 flex"><li data-hk="4.0" class="m-3 p-1"><a data-hk="4.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="4.2" class="m-3 p-1"><a class="px-2" href="en-US/comparisons" data-hk="4.3">Comparisons</a></li><li class="m-3 p-1" data-hk="4.4"><a data-hk="4.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul></nav></div><nav class="md:hidden w-full text-center justify-center overflow-y-scroll hidden" data-hk="3.8" id="mobile_nav_menu"><div style="max-height: 500px" data-hk="3.9" class="mr-5 overflow-y-scroll"><ul data-hk="3.10"><li data-hk="5.0" class="m-3 p-1"><a class="px-2" data-hk="5.1" href="en-US/docs">Docs</a></li><li data-hk="5.2" class="m-3 p-1"><a href="en-US/comparisons" class="px-2" data-hk="5.3">Comparisons</a></li><li data-hk="5.4" class="m-3 p-1"><a href="en-US/plugins" class="px-2" data-hk="5.5">Plugins</a></li></ul><hr data-hk="3.11"/><div data-hk="3.12" class="text-left p-3"><!--#--><!----><select class="p-2 rounded-md text-white bg-indigo-500" data-hk="6.0"><option data-hk="6.1" value="next">Next (unreleased)</option><!--#--><!--/--><option value="0.3.x" data-hk="6.2" selected="">v⁨0.3.x⁩ (stable)</option><!--#--><option data-hk="6.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option data-hk="6.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div class="docs-links-markdown" data-hk="3.13"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers">Modifying HTTP Headers</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths">Relative Paths</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing">Routing</a></li>
</ul>
</li>
</ul>
</div></div></div></nav></header><div data-hk="3.14" class="mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex"><div data-hk="3.15" class="flex w-full"><div data-hk="3.16" class="h-full hidden md:block max-w-xs w-full border-r"><div class="mr-5" data-hk="3.17"><div data-hk="3.18" class="text-left text-black dark:text-white p-3"><aside data-hk="3.19"><!--#--><!----><select data-hk="7.0" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="7.1" value="next">Next (unreleased)</option><!--#--><!--/--><option data-hk="7.2" value="0.3.x" selected="">v⁨0.3.x⁩ (stable)</option><!--#--><option data-hk="7.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option value="0.1.x" data-hk="7.4">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.20" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers">Modifying HTTP Headers</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths">Relative Paths</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing">Routing</a></li>
</ul>
</li>
</ul>
</div></aside></div></div></div><div data-hk="3.21" class="h-full flex w-full"><div class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl" data-hk="3.22"><!--#--><!----><!--/--><main class="text-black dark:text-white" data-hk="3.23"><div class="markdown" data-hk="2.0"><h1>Hydration</h1>
<p>In the examples of <code>Cargo.toml</code> files shown thus far, we've enabled a feature called <code>hydrate</code> on Perseus. This feature controls <em>hydration</em>, which is a way of making your app more performant. To explain it, we'll need to go a little in-depth.</p>
<p>Perseus uses server-side rendering of some kind for almost everything. In fact, unless you explicitly make something only run in the browser, Perseus will try to prerender it on the server first, either at build-time (faster, so Perseus does this for everything it can) or at request-time. This prerendering process yields a series of HTML and JSON fiels that make up the markup and state of your app. When a page is requested by a user, Perseus can serve them these files, and then the app shell (the Wasm code that runs everything in a Perseus app in the browser) will bring everything to life.</p>
<p>Those prerendered files can be imagined as solid iron, but, to make your app work, we need molten iron. In the real world, you need a lot of heat to turn iron into a liquid, and you need a lot of code to turn simple markup into interactive buttons and text in a browser! So, let's go through the metaphor a bit more: the build process and server are the miners that fetch all the iron out of the mines of the tempalte code you write. Then, that iron is sent to the user's browser, and the app shell does <em>something</em> to get molten iron that can be used to run your app.</p>
<p>Without hydration, the app shell will kindly thank the server for sending it the solid iron, and will then proceed to mine more of its own. In other words, the app shell will completely ignore the prerendered files that the server has sent (displaying them only until it's ready, which is why Perseus apps still work without JavaScript!).</p>
<p>But with hydration, the app shell can intelligently melt the iron that it's been given, it can <em>hydrate</em> the simple markdown. Using hydration is generally much faster than not using hydration, though it's also very hard to implement! Hydration is done by Sycamore, and it's still experimental right now, so it's opt-in with Perseus. You can use the <code>hydrate</code> feature flag to enable it in any Perseus app, though you should be aware that there's a chance that things may break in very strange ways! If this happens, try disabling hydration.</p>
<h2>Performance Costs of Disabling Hydration</h2>
<p>Not using hydration will impact your site's performance when the user first loads a page (moving around within the app is no problem), because the browser has to do a little more work, but it also has to completely re-display your site. The difference shouldn't be visible to users at all unless they try to scroll as soon as your site loads (as in within less than half a second on modern machines), in which case they'll be thrown back to the top of the site. However, Lighthouse doesn't seem to notice any differences, so your scores there won't change!</p>
<p>Notably, to make hydration better for the community, you should file any bugs about hydration on <a href="https://github.com/sycamore-rs/sycamore">the Sycamore repository</a>.</p>
</div></main></div></div></div></div><footer class="w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep" data-hk="3.24"><p class="dark:text-white mx-5 text-center" data-hk="3.25"><span data-hk="3.26">© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> ⁨2021⁩, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer><script data-hk="2.1" defer="" src=".perseus/static/prism.js"></script><script data-hk="2.2">window.Prism.highlightAll();</script></div></div>
    </body>
</html>
