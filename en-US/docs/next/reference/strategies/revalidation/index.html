<!DOCTYPE html>
<html lang="en" class="light">
    <head>
<base href="https://arctic-hen7.github.io/perseus/" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href=".perseus/static/tailwind.css" />
        <link rel="stylesheet" href=".perseus/static/styles/style.css" />
    <script>window.__PERSEUS_RENDER_CFG = '{"plugins":"plugins","docs/views":"docs","docs/0.3.0-0.3.3/i18n/defining":"docs","docs/next/reference/plugins/functional":"docs","docs/0.3.0-0.3.3/deploying/relative-paths":"docs","docs/0.3.0-0.3.3/templates/setting-headers":"docs","docs/next/what-is-perseus":"docs","docs/templates/intro":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.2.x/advanced/arch":"docs","docs/server-communication":"docs","docs/second-app":"docs","docs/0.3.0-0.3.3/advanced/define_app":"docs","docs/next/reference/i18n/other-engines":"docs","docs/next/reference/pitfalls-and-bugs":"docs","docs/plugins/intro":"docs","docs/snooping":"docs","docs/0.3.0-0.3.3/advanced/subsequent-loads":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/next/core-principles":"docs","docs/0.3.0-0.3.3/pitfalls-and-bugs":"docs","docs/deploying/serverful":"docs","docs/next/reference/i18n/translations-managers":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.3.0-0.3.3/error-pages":"docs","docs/next/reference/strategies/build-paths":"docs","docs/0.2.x/intro":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/next/reference/server-communication":"docs","docs/next/reference/templates/metadata-modification":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/advanced/routing":"docs","docs/0.2.x/strategies/request-state":"docs","docs/next/advanced/intro":"docs","docs/next/reference/ejecting":"docs","docs/next/reference/state/global":"docs","docs/next/reference/strategies/amalgamation":"docs","docs/strategies/build-state":"docs","docs/0.2.x/define-app":"docs","index":"index","docs/updating":"docs","docs/0.3.0-0.3.3/plugins/control":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.2.x/advanced/intro":"docs","docs/strategies/intro":"docs","docs/hydration":"docs","docs/next/reference/i18n/intro":"docs","docs/next/tutorials/hello-world":"docs","docs/0.3.0-0.3.3/advanced/routing":"docs","docs/plugins/functional":"docs","docs/next/reference/testing/fantoccini-basics":"docs","docs/plugins/using":"docs","docs/next/reference/i18n/defining":"docs","docs/0.3.0-0.3.3/server-communication":"docs","docs/0.3.0-0.3.3/intro":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.0-0.3.3/views":"docs","docs/0.3.0-0.3.3/deploying/serverful":"docs","docs/0.3.0-0.3.3/testing/fantoccini-basics":"docs","docs/0.2.x/i18n/using":"docs","docs/testing/checkpoints":"docs","docs/plugins/security":"docs","docs/0.3.0-0.3.3/strategies/request-state":"docs","docs/next/reference/views":"docs","docs/next/reference/deploying/serverful":"docs","docs/plugins/publishing":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.3.0-0.3.3/i18n/translations-managers":"docs","docs/deploying/serverless":"docs","docs/i18n/defining":"docs","docs/0.2.x/advanced/routing":"docs","docs/deploying/intro":"docs","docs/0.2.x/cli":"docs","docs/next/reference/error-pages":"docs","docs/0.3.0-0.3.3/ejecting":"docs","docs/0.2.x/i18n/defining":"docs","docs/next/advanced/subsequent-loads":"docs","docs/next/tutorials/second-app":"docs","docs/0.3.0-0.3.3/hydration":"docs","docs/next/reference/plugins/tinker":"docs","docs/0.2.x/templates/intro":"docs","docs/what-is-perseus":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.2.x/static-content":"docs","docs/0.3.0-0.3.3/deploying/docker":"docs","docs":"docs","docs/0.2.x/what-is-perseus":"docs","docs/0.1.x/strategies/request_state":"docs","docs/plugins/writing":"docs","docs/0.3.0-0.3.3/strategies/build-state":"docs","docs/next/advanced/routing":"docs","docs/0.1.x/strategies/intro":"docs","docs/advanced/subsequent-loads":"docs","docs/hello-world":"docs","docs/0.3.0-0.3.3/i18n/intro":"docs","docs/0.3.0-0.3.3/strategies/incremental":"docs","docs/next/reference/static-content":"docs","docs/0.3.0-0.3.3/templates/metadata-modification":"docs","comparisons":"comparisons","docs/stores":"docs","docs/testing/fantoccini-basics":"docs","docs/0.3.0-0.3.3/deploying/serverless":"docs","docs/0.1.x/cli":"docs","docs/0.2.x/ejecting":"docs","docs/plugins/tinker":"docs","docs/i18n/translations-managers":"docs","docs/0.2.x/debugging":"docs","docs/0.3.0-0.3.3/what-is-perseus":"docs","docs/advanced/intro":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/next/intro":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/0.3.0-0.3.3/advanced/arch":"docs","docs/0.3.0-0.3.3/templates/intro":"docs","docs/next/reference/templates/setting-headers":"docs","docs/0.1.x/serving":"docs","docs/next/reference/plugins/control":"docs","docs/0.3.0-0.3.3/advanced/initial-loads":"docs","docs/0.3.0-0.3.3/cli":"docs","docs/next/reference/testing/checkpoints":"docs","docs/0.2.x/error-pages":"docs","docs/strategies/build-paths":"docs","docs/next/reference/exporting":"docs","docs/0.1.x/setup":"docs","docs/deploying/docker":"docs","docs/next/reference/live-reloading":"docs","docs/next/reference/index-view":"docs","docs/next/reference/deploying/size":"docs","docs/0.3.0-0.3.3/define-app":"docs","docs/0.3.0-0.3.3/plugins/publishing":"docs","docs/0.3.0-0.3.3/hello-world":"docs","docs/next/reference/state/idb-freezing":"docs","docs/next/reference/deploying/relative-paths":"docs","docs/deploying/relative-paths":"docs","docs/0.3.0-0.3.3/i18n/using":"docs","docs/0.3.0-0.3.3/styling":"docs","docs/0.2.x/updating":"docs","docs/0.3.0-0.3.3/strategies/intro":"docs","docs/0.3.0-0.3.3/plugins/writing":"docs","docs/0.2.x/strategies/build-state":"docs","docs/0.3.0-0.3.3/testing/intro":"docs","docs/templates/setting-headers":"docs","docs/0.3.0-0.3.3/strategies/amalgamation":"docs","docs/0.2.x/hello-world":"docs","docs/strategies/amalgamation":"docs","docs/0.1.x/arch":"docs","docs/0.3.0-0.3.3/static-content":"docs","docs/next/reference/strategies/revalidation":"docs","docs/advanced/initial-loads":"docs","docs/0.1.x/config_managers":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.3.0-0.3.3/strategies/revalidation":"docs","docs/next/reference/deploying/intro":"docs","docs/0.3.0-0.3.3/plugins/tinker":"docs","docs/advanced/arch":"docs","docs/testing/intro":"docs","docs/next/reference/strategies/intro":"docs","docs/plugins/control":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.3.0-0.3.3/plugins/intro":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/define-app":"docs","docs/0.3.0-0.3.3/plugins/security":"docs","docs/next/reference/cli":"docs","docs/0.2.x/config-managers":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.0-0.3.3/deploying/intro":"docs","docs/next/reference/state/freezing":"docs","docs/next/reference/state/rx":"docs","docs/0.3.0-0.3.3/snooping":"docs","docs/next/reference/deploying/serverless":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.2.x/testing/intro":"docs","docs/intro":"docs","docs/next/reference/plugins/publishing":"docs","docs/0.1.x/intro":"docs","docs/next/reference/styling":"docs","docs/0.3.0-0.3.3/exporting":"docs","docs/next/reference/engines":"docs","docs/next/reference/strategies/incremental":"docs","docs/0.3.0-0.3.3/strategies/build-paths":"docs","docs/next/reference/testing/intro":"docs","docs/i18n/other-engines":"docs","docs/next/advanced/arch":"docs","docs/0.2.x/styling":"docs","docs/next/reference/state/hsr":"docs","docs/next/reference/templates/router-state":"docs","docs/next/advanced/initial-loads":"docs","docs/debugging":"docs","docs/exporting":"docs","docs/static-content":"docs","docs/advanced/define_app":"docs","docs/next/reference/plugins/using":"docs","docs/next/reference/debugging":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/next/reference/stores":"docs","docs/0.1.x/routing":"docs","docs/0.3.0-0.3.3/i18n/other-engines":"docs","docs/strategies/request-state":"docs","docs/i18n/intro":"docs","docs/0.3.0-0.3.3/testing/manual":"docs","docs/0.2.x/strategies/intro":"docs","docs/0.3.0-0.3.3/plugins/using":"docs","docs/next/reference/templates/intro":"docs","docs/next/reference/testing/manual":"docs","docs/next/reference/strategies/build-state":"docs","docs/0.1.x/building":"docs","docs/0.2.x/views":"docs","docs/deploying/size":"docs","docs/cli":"docs","docs/next/reference/snooping":"docs","docs/0.3.0-0.3.3/advanced/intro":"docs","docs/0.2.x/second-app":"docs","docs/next/reference/strategies/request-state":"docs","docs/0.3.0-0.3.3/updating":"docs","docs/0.3.0-0.3.3/deploying/size":"docs","docs/0.1.x/error_pages":"docs","docs/strategies/incremental":"docs","docs/0.3.0-0.3.3/stores":"docs","docs/i18n/using":"docs","docs/next/reference/hydration":"docs","docs/error-pages":"docs","docs/next/reference/plugins/writing":"docs","docs/0.3.0-0.3.3/testing/checkpoints":"docs","docs/next/reference/plugins/security":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/next/reference/perseus-app":"docs","docs/0.3.0-0.3.3/second-app":"docs","docs/pitfalls-and-bugs":"docs","docs/next/reference/updating":"docs","docs/next/reference/deploying/docker":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/next/advanced/define_app":"docs","docs/next/reference/i18n/using":"docs","docs/testing/manual":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/templates/metadata-modification":"docs","docs/styling":"docs","docs/next/advanced/route-announcer":"docs","docs/0.2.x/testing/manual":"docs","docs/0.3.0-0.3.3/debugging":"docs","docs/strategies/revalidation":"docs","docs/0.1.x/templates":"docs","docs/next/reference/plugins/intro":"docs","docs/next/reference/define-app":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/ejecting":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.3.0-0.3.3/plugins/functional":"docs"}';</script>
<script type="module">
    import init, { run } from "https://arctic-hen7.github.io/perseus/.perseus/bundle.js";
    async function main() {
        await init("https://arctic-hen7.github.io/perseus/.perseus/bundle.wasm");
        run();
    }
    main();
</script>
<!--PERSEUS_INTERPOLATED_HEAD_BEGINS--><title data-hk="1.0">Revalidation | Perseus Docs</title><link rel="stylesheet" href=".perseus/static/styles/markdown.css" data-hk="1.1"/><link href=".perseus/static/styles/docs_links_markdown.css" data-hk="1.2" rel="stylesheet"/><link rel="stylesheet" href=".perseus/static/prism.css" data-hk="1.3"/>
<script>window.__PERSEUS_INITIAL_STATE = `{"title":"Revalidation","content":"<h1>Revalidation</h1>\\n<p>While the <em>build state</em> and <em>build paths</em> strategies are excellent for generating pages efficiently, they can't be updated for new content. For example, using these strategies alone, you'd need to rebuild a blog every time you added a new post, even if those posts were stored in a database. With <em>revalidation</em>, you can avoid this by instructing Perseus to rebuild a template if certain criteria are met when it's requested.</p>\\n<p>There are two types of revalidation: time-based and logic-based. The former lets you re-render a template every 24 hours or the like, while the latter allows you to re-render a template if an arbitrary function returns <code>true</code>.</p>\\n<h2>Time-Based Revalidation Usage</h2>\\n<p>Here's an example of time-based revalidation from <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/core/state_generation/src/templates/revalidation_and_incremental_generation.rs\\">here</a> (note that this uses <em>incremental generation</em> as well):</p>\\n<pre><code class=\\"language-rust\\">// This page exists mostly for testing revalidation together with incremental generation (because the two work in complex\\n// ways together)\\n\\nuse perseus::{RenderFnResult, RenderFnResultWithCause, Template};\\nuse sycamore::prelude::{view, Html, View};\\n\\n#[perseus::make_rx(PageStateRx)]\\npub struct PageState {\\n    pub time: String,\\n}\\n\\n#[perseus::template_rx]\\npub fn revalidation_and_incremental_generation_page(state: PageStateRx) -&gt; View&lt;G&gt; {\\n    view! {\\n        p { (format!(&quot;The time when this page was last rendered was '{}'.&quot;, state.time.get())) }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;revalidation_and_incremental_generation&quot;)\\n        .template(revalidation_and_incremental_generation_page)\\n        // This page will revalidate every five seconds (and so the time displayed will be updated)\\n        .revalidate_after(&quot;5s&quot;.to_string())\\n        // This is an alternative method of revalidation that uses logic, which will be executed every itme a user tries to\\n        // load this page. For that reason, this should NOT do long-running work, as requests will be delayed. If both this\\n        // and \`revaldiate_after()\` are provided, this logic will only run when \`revalidate_after()\` tells Perseus\\n        // that it should revalidate.\\n        .should_revalidate_fn(|| async { Ok(true) })\\n        .build_state_fn(get_build_state)\\n        .build_paths_fn(get_build_paths)\\n        .incremental_generation()\\n}\\n\\n// This will get the system time when the app was built\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(_path: String, _locale: String) -&gt; RenderFnResultWithCause&lt;PageState&gt; {\\n    Ok(PageState {\\n        time: format!(&quot;{:?}&quot;, std::time::SystemTime::now()),\\n    })\\n}\\n\\npub async fn get_build_paths() -&gt; RenderFnResult&lt;Vec&lt;String&gt;&gt; {\\n    Ok(vec![&quot;test&quot;.to_string(), &quot;blah/test/blah&quot;.to_string()])\\n}\\n\\n</code></pre>\\n<p>This page displays the time at which it was built (fetched with <em>build state</em>), but rebuilds every five seconds. Note that this doesn't translate to the server's actually rebuilding it every five seconds, but rather the server will rebuild it at the next request if more than five seconds have passed since it was last built (meaning templates on the same build schedule will likely go our of sync quickly).</p>\\n<h3>Time Syntax</h3>\\n<p>Perseus uses a very simple syntax inspired by <a href=\\"https://github.com/vercel/ms\\">this JavaScript project</a> to specify time intervals in the form <code>xXyYzZ</code> (e.g. <code>1w</code>, <code>5s</code>, <code>1w5s</code>), where the lower-case letters are number and the upper-case letters are intervals, the supported of which are listed below:</p>\\n<ul>\\n<li><code>s</code>: second,</li>\\n<li><code>m</code>: minute,</li>\\n<li><code>h</code>: hour,</li>\\n<li><code>d</code>: day,</li>\\n<li><code>w</code>: week,</li>\\n<li><code>M</code>: month (30 days used here, 12M ≠ 1y!),</li>\\n<li><code>y</code>: year (365 days always, leap years ignored, if you want them add them as days)</li>\\n</ul>\\n<h2>Logic-Based Revalidation Usage</h2>\\n<p>Here's an example of logic-based revalidation from <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/core/state_generation/src/templates/revalidation.rs\\">here</a> (actually, this example uses both types of revalidation):</p>\\n<pre><code class=\\"language-rust\\">use perseus::{RenderFnResultWithCause, Template};\\nuse sycamore::prelude::{view, Html, View};\\n\\n#[perseus::make_rx(PageStateRx)]\\npub struct PageState {\\n    pub time: String,\\n}\\n\\n#[perseus::template_rx]\\npub fn revalidation_page(state: PageStateRx) -&gt; View&lt;G&gt; {\\n    view! {\\n        p { (format!(&quot;The time when this page was last rendered was '{}'.&quot;, state.time.get())) }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;revalidation&quot;)\\n        .template(revalidation_page)\\n        // This page will revalidate every five seconds (and so the time displayed will be updated)\\n        .revalidate_after(&quot;5s&quot;.to_string())\\n        // This is an alternative method of revalidation that uses logic, which will be executed every itme a user tries to\\n        // load this page. For that reason, this should NOT do long-running work, as requests will be delayed. If both this\\n        // and \`revaldiate_after()\` are provided, this logic will only run when \`revalidate_after()\` tells Perseus\\n        // that it should revalidate.\\n        .should_revalidate_fn(should_revalidate)\\n        .build_state_fn(get_build_state)\\n}\\n\\n// This will get the system time when the app was built\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(_path: String, _locale: String) -&gt; RenderFnResultWithCause&lt;PageState&gt; {\\n    Ok(PageState {\\n        time: format!(&quot;{:?}&quot;, std::time::SystemTime::now()),\\n    })\\n}\\n\\n// This will run every time \`.revalidate_after()\` permits the page to be revalidated\\n// This acts as a secondary check, and can perform arbitrary logic to check if we should actually revalidate a page\\npub async fn should_revalidate() -&gt; RenderFnResultWithCause&lt;bool&gt; {\\n    // For simplicity's sake, this will always say we should revalidate, but you could amke this check any condition\\n    Ok(true)\\n}\\n\\n</code></pre>\\n<p>If it were just <code>.should_revalidate_fn()</code> being called here, this page would always be rebuilt every time it's requested (the closure always returns <code>true</code>, note that errors would be <code>String</code>s), however, the additional usage of time-based revalidation regulates this, and the page will only be rebuilt every five seconds. In short, your arbitrary revalidation logic will only be executed at the intervals of your time-based revalidation intervals (if none are set, it will run on every request).</p>\\n<p>Note that you should avoid lengthy operations in revalidation if at all possible, as, like the <em>request state</em> strategy, this logic will be executed while the client is waiting for their page to load.</p>\\n","sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/perseus-app\\"><code>PerseusApp</code></a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app\\"><code>define_app!</code></a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views\\">Writing Views</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/index-view\\">The Index View</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/live-reloading\\">Live Reloading</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing\\">State Freezing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing\\">Freezing to IndexedDB</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/hsr\\">Hot State Reloading (HSR)</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines\\">Engines</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating\\">Migrating from v0.2.x</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app\\"><code>define_app</code> in Detail</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/route-announcer\\">Route Announcer</a></li>\\n</ul>\\n","status":"Next","manifest":{"stable":"0.3.0-0.3.3","outdated":["0.2.x","0.1.x"],"beta":[],"history_map":{"0.3.0-0.3.3":"v0.3.3","0.1.x":"v0.1.4","0.2.x":"v0.2.3"}},"current_version":"next"}`;</script>
</head>
    <body class="bg-white dark:bg-navy">
        <div id="root"><div id="__perseus_content_initial" class="__perseus_content"><header class="shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20" data-hk="3.0"><div data-hk="3.1" class="flex justify-between"><a class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl" href="en-US/" data-hk="3.2">Perseus</a><div class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 " data-hk="3.3"><div class="tham-box" data-hk="3.4"><div class="dark:bg-white tham-inner" data-hk="3.5"></div></div></div><nav data-hk="3.6" class="hidden md:flex"><ul class="mr-5 flex" data-hk="3.7"><li data-hk="4.0" class="m-3 p-1"><a class="px-2" data-hk="4.1" href="en-US/docs">Docs</a></li><li data-hk="4.2" class="m-3 p-1"><a href="en-US/comparisons" data-hk="4.3" class="px-2">Comparisons</a></li><li data-hk="4.4" class="m-3 p-1"><a data-hk="4.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul></nav></div><nav data-hk="3.8" class="md:hidden w-full text-center justify-center overflow-y-scroll hidden" id="mobile_nav_menu"><div data-hk="3.9" style="max-height: 500px" class="mr-5 overflow-y-scroll"><ul data-hk="3.10"><li class="m-3 p-1" data-hk="5.0"><a class="px-2" data-hk="5.1" href="en-US/docs">Docs</a></li><li data-hk="5.2" class="m-3 p-1"><a data-hk="5.3" href="en-US/comparisons" class="px-2">Comparisons</a></li><li class="m-3 p-1" data-hk="5.4"><a data-hk="5.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul><hr data-hk="3.11"/><div data-hk="3.12" class="text-left p-3"><!--#--><!----><select data-hk="6.0" class="p-2 rounded-md text-white bg-indigo-500"><option selected="" value="next" data-hk="6.1">Next (unreleased)</option><!--#--><!--/--><option data-hk="6.2" value="0.3.0-0.3.3">v⁨0.3.0-0.3.3⁩ (stable)</option><!--#--><option data-hk="6.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option data-hk="6.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div class="docs-links-markdown" data-hk="3.13"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines">Engines</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/route-announcer">Route Announcer</a></li>
</ul>
</div></div></div></nav></header><div class="mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex" data-hk="3.14"><div data-hk="3.15" class="flex w-full"><div data-hk="3.16" class="h-full hidden md:block max-w-xs w-full border-r"><div data-hk="3.17" class="mr-5"><div data-hk="3.18" class="text-left text-black dark:text-white p-3"><aside data-hk="3.19"><!--#--><!----><select data-hk="7.0" class="p-2 rounded-md text-white bg-indigo-500"><option value="next" data-hk="7.1" selected="">Next (unreleased)</option><!--#--><!--/--><option value="0.3.0-0.3.3" data-hk="7.2">v⁨0.3.0-0.3.3⁩ (stable)</option><!--#--><option value="0.2.x" data-hk="7.3">v⁨0.2.x⁩ (outdated)</option><option data-hk="7.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.20" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/perseus-app"><code>PerseusApp</code></a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/index-view">The Index View</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/live-reloading">Live Reloading</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/hsr">Hot State Reloading (HSR)</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines">Engines</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/route-announcer">Route Announcer</a></li>
</ul>
</div></aside></div></div></div><div class="h-full flex w-full" data-hk="3.21"><div data-hk="3.22" class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl"><!--#--><div data-hk="3.23" class="ring-4 ring-orange-400 p-4 rounded-lg mt-1"><div class="flex flex-col 2xs:flex-row dark:text-white" data-hk="3.24"><span data-hk="3.25" class="self-center mr-2" style="fill: #fb923c;"><svg xmlns="http://www.w3.org/2000/svg" height="auto" viewBox="0 0 24 24" width="2.25rem" fill="\#000000"><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk="3.26">This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href="en-US/docs/0.3.x/intro" class="underline">here</a>.</p></div></div><!--/--><main data-hk="3.27" class="text-black dark:text-white"><div class="markdown" data-hk="2.0"><h1>Revalidation</h1>
<p>While the <em>build state</em> and <em>build paths</em> strategies are excellent for generating pages efficiently, they can't be updated for new content. For example, using these strategies alone, you'd need to rebuild a blog every time you added a new post, even if those posts were stored in a database. With <em>revalidation</em>, you can avoid this by instructing Perseus to rebuild a template if certain criteria are met when it's requested.</p>
<p>There are two types of revalidation: time-based and logic-based. The former lets you re-render a template every 24 hours or the like, while the latter allows you to re-render a template if an arbitrary function returns <code>true</code>.</p>
<h2>Time-Based Revalidation Usage</h2>
<p>Here's an example of time-based revalidation from <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/core/state_generation/src/templates/revalidation_and_incremental_generation.rs">here</a> (note that this uses <em>incremental generation</em> as well):</p>
<pre><code class="language-rust">// This page exists mostly for testing revalidation together with incremental generation (because the two work in complex
// ways together)

use perseus::{RenderFnResult, RenderFnResultWithCause, Template};
use sycamore::prelude::{view, Html, View};

#[perseus::make_rx(PageStateRx)]
pub struct PageState {
    pub time: String,
}

#[perseus::template_rx]
pub fn revalidation_and_incremental_generation_page(state: PageStateRx) -&gt; View&lt;G&gt; {
    view! {
        p { (format!(&quot;The time when this page was last rendered was '{}'.&quot;, state.time.get())) }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;revalidation_and_incremental_generation&quot;)
        .template(revalidation_and_incremental_generation_page)
        // This page will revalidate every five seconds (and so the time displayed will be updated)
        .revalidate_after(&quot;5s&quot;.to_string())
        // This is an alternative method of revalidation that uses logic, which will be executed every itme a user tries to
        // load this page. For that reason, this should NOT do long-running work, as requests will be delayed. If both this
        // and `revaldiate_after()` are provided, this logic will only run when `revalidate_after()` tells Perseus
        // that it should revalidate.
        .should_revalidate_fn(|| async { Ok(true) })
        .build_state_fn(get_build_state)
        .build_paths_fn(get_build_paths)
        .incremental_generation()
}

// This will get the system time when the app was built
#[perseus::autoserde(build_state)]
pub async fn get_build_state(_path: String, _locale: String) -&gt; RenderFnResultWithCause&lt;PageState&gt; {
    Ok(PageState {
        time: format!(&quot;{:?}&quot;, std::time::SystemTime::now()),
    })
}

pub async fn get_build_paths() -&gt; RenderFnResult&lt;Vec&lt;String&gt;&gt; {
    Ok(vec![&quot;test&quot;.to_string(), &quot;blah/test/blah&quot;.to_string()])
}

</code></pre>
<p>This page displays the time at which it was built (fetched with <em>build state</em>), but rebuilds every five seconds. Note that this doesn't translate to the server's actually rebuilding it every five seconds, but rather the server will rebuild it at the next request if more than five seconds have passed since it was last built (meaning templates on the same build schedule will likely go our of sync quickly).</p>
<h3>Time Syntax</h3>
<p>Perseus uses a very simple syntax inspired by <a href="https://github.com/vercel/ms">this JavaScript project</a> to specify time intervals in the form <code>xXyYzZ</code> (e.g. <code>1w</code>, <code>5s</code>, <code>1w5s</code>), where the lower-case letters are number and the upper-case letters are intervals, the supported of which are listed below:</p>
<ul>
<li><code>s</code>: second,</li>
<li><code>m</code>: minute,</li>
<li><code>h</code>: hour,</li>
<li><code>d</code>: day,</li>
<li><code>w</code>: week,</li>
<li><code>M</code>: month (30 days used here, 12M ≠ 1y!),</li>
<li><code>y</code>: year (365 days always, leap years ignored, if you want them add them as days)</li>
</ul>
<h2>Logic-Based Revalidation Usage</h2>
<p>Here's an example of logic-based revalidation from <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/core/state_generation/src/templates/revalidation.rs">here</a> (actually, this example uses both types of revalidation):</p>
<pre><code class="language-rust">use perseus::{RenderFnResultWithCause, Template};
use sycamore::prelude::{view, Html, View};

#[perseus::make_rx(PageStateRx)]
pub struct PageState {
    pub time: String,
}

#[perseus::template_rx]
pub fn revalidation_page(state: PageStateRx) -&gt; View&lt;G&gt; {
    view! {
        p { (format!(&quot;The time when this page was last rendered was '{}'.&quot;, state.time.get())) }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;revalidation&quot;)
        .template(revalidation_page)
        // This page will revalidate every five seconds (and so the time displayed will be updated)
        .revalidate_after(&quot;5s&quot;.to_string())
        // This is an alternative method of revalidation that uses logic, which will be executed every itme a user tries to
        // load this page. For that reason, this should NOT do long-running work, as requests will be delayed. If both this
        // and `revaldiate_after()` are provided, this logic will only run when `revalidate_after()` tells Perseus
        // that it should revalidate.
        .should_revalidate_fn(should_revalidate)
        .build_state_fn(get_build_state)
}

// This will get the system time when the app was built
#[perseus::autoserde(build_state)]
pub async fn get_build_state(_path: String, _locale: String) -&gt; RenderFnResultWithCause&lt;PageState&gt; {
    Ok(PageState {
        time: format!(&quot;{:?}&quot;, std::time::SystemTime::now()),
    })
}

// This will run every time `.revalidate_after()` permits the page to be revalidated
// This acts as a secondary check, and can perform arbitrary logic to check if we should actually revalidate a page
pub async fn should_revalidate() -&gt; RenderFnResultWithCause&lt;bool&gt; {
    // For simplicity's sake, this will always say we should revalidate, but you could amke this check any condition
    Ok(true)
}

</code></pre>
<p>If it were just <code>.should_revalidate_fn()</code> being called here, this page would always be rebuilt every time it's requested (the closure always returns <code>true</code>, note that errors would be <code>String</code>s), however, the additional usage of time-based revalidation regulates this, and the page will only be rebuilt every five seconds. In short, your arbitrary revalidation logic will only be executed at the intervals of your time-based revalidation intervals (if none are set, it will run on every request).</p>
<p>Note that you should avoid lengthy operations in revalidation if at all possible, as, like the <em>request state</em> strategy, this logic will be executed while the client is waiting for their page to load.</p>
</div></main></div></div></div></div><footer data-hk="3.28" class="w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep"><p data-hk="3.29" class="dark:text-white mx-5 text-center"><span data-hk="3.30">© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> ⁨2021⁩, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer><script data-hk="2.1" src=".perseus/static/prism.js" defer=""></script><script data-hk="2.2">window.Prism.highlightAll();</script></div></div>
    </body>
</html>
