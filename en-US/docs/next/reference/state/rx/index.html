<!DOCTYPE html>
<html lang="en" class="light">
    <head>
<base href="https://arctic-hen7.github.io/perseus/" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href=".perseus/static/tailwind.css" />
        <link rel="stylesheet" href=".perseus/static/styles/style.css" />
    <script>window.__PERSEUS_RENDER_CFG = '{"docs/advanced/intro":"docs","docs/0.3.x/strategies/build-state":"docs","docs/intro":"docs","docs/0.3.x/views":"docs","docs/testing/checkpoints":"docs","docs/next/reference/plugins/tinker":"docs","docs/next/reference/error-pages":"docs","docs/next/reference/i18n/other-engines":"docs","docs/next/reference/i18n/using":"docs","docs/next/reference/views":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/0.3.x/static-content":"docs","docs/next/reference/state/rx":"docs","docs/plugins/writing":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/0.3.x/stores":"docs","docs/i18n/translations-managers":"docs","docs/advanced/subsequent-loads":"docs","docs/next/advanced/subsequent-loads":"docs","docs/second-app":"docs","docs/0.3.x/second-app":"docs","docs/0.3.x/testing/intro":"docs","docs/0.2.x/deploying/intro":"docs","docs/0.2.x/cli":"docs","docs/0.3.x/hydration":"docs","docs/0.2.x/updating":"docs","docs/next/reference/deploying/intro":"docs","docs/plugins/control":"docs","docs/0.3.x/advanced/routing":"docs","docs/i18n/using":"docs","docs":"docs","docs/next/what-is-perseus":"docs","docs/next/reference/hydration":"docs","docs/next/reference/server-communication":"docs","docs/0.3.x/updating":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/next/reference/templates/router-state":"docs","docs/ejecting":"docs","docs/i18n/intro":"docs","docs/next/reference/templates/intro":"docs","docs/next/reference/plugins/using":"docs","docs/deploying/size":"docs","docs/static-content":"docs","docs/templates/metadata-modification":"docs","docs/next/reference/state/global":"docs","docs/0.1.x/config_managers":"docs","docs/next/advanced/intro":"docs","docs/next/reference/i18n/intro":"docs","docs/testing/fantoccini-basics":"docs","docs/next/reference/stores":"docs","docs/0.3.x/testing/manual":"docs","docs/0.3.x/i18n/translations-managers":"docs","docs/0.3.x/what-is-perseus":"docs","docs/next/reference/exporting":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.1.x/strategies/request_state":"docs","docs/0.3.x/templates/setting-headers":"docs","docs/0.3.x/debugging":"docs","docs/0.2.x/i18n/using":"docs","docs/next/advanced/routing":"docs","docs/0.3.x/plugins/intro":"docs","docs/next/reference/strategies/request-state":"docs","docs/next/reference/strategies/amalgamation":"docs","docs/error-pages":"docs","docs/0.3.x/plugins/writing":"docs","docs/0.1.x/routing":"docs","docs/0.1.x/building":"docs","docs/strategies/revalidation":"docs","docs/next/reference/templates/metadata-modification":"docs","docs/i18n/other-engines":"docs","docs/0.3.x/advanced/define_app":"docs","docs/next/reference/strategies/build-state":"docs","docs/next/reference/pitfalls-and-bugs":"docs","docs/next/reference/updating":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/snooping":"docs","docs/0.2.x/what-is-perseus":"docs","docs/next/reference/testing/fantoccini-basics":"docs","docs/0.2.x/strategies/intro":"docs","docs/plugins/tinker":"docs","docs/stores":"docs","docs/0.3.x/deploying/size":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/advanced/initial-loads":"docs","docs/0.3.x/deploying/docker":"docs","docs/0.2.x/advanced/arch":"docs","docs/exporting":"docs","docs/styling":"docs","docs/strategies/build-state":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/0.3.x/i18n/other-engines":"docs","docs/next/reference/plugins/control":"docs","docs/0.2.x/config-managers":"docs","docs/0.2.x/deploying/exporting":"docs","docs/0.3.x/strategies/incremental":"docs","docs/plugins/security":"docs","docs/views":"docs","docs/next/tutorials/hello-world":"docs","docs/0.3.x/deploying/intro":"docs","docs/debugging":"docs","docs/0.2.x/i18n/defining":"docs","docs/0.3.x/plugins/security":"docs","docs/templates/intro":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.1.x/templates":"docs","docs/strategies/intro":"docs","docs/strategies/build-paths":"docs","docs/0.1.x/setup":"docs","docs/next/reference/debugging":"docs","docs/plugins/functional":"docs","docs/0.1.x/error_pages":"docs","docs/next/reference/deploying/docker":"docs","index":"index","docs/next/reference/styling":"docs","docs/next/advanced/define_app":"docs","docs/0.1.x/arch":"docs","docs/0.2.x/strategies/request-state":"docs","docs/0.2.x/strategies/build-state":"docs","plugins":"plugins","docs/plugins/using":"docs","docs/testing/intro":"docs","docs/0.3.x/templates/intro":"docs","docs/0.2.x/debugging":"docs","docs/next/reference/deploying/relative-paths":"docs","docs/0.3.x/i18n/using":"docs","docs/0.3.x/ejecting":"docs","docs/0.2.x/advanced/intro":"docs","docs/0.2.x/second-app":"docs","docs/next/reference/ejecting":"docs","docs/hydration":"docs","docs/advanced/arch":"docs","docs/strategies/amalgamation":"docs","docs/0.1.x/serving":"docs","docs/0.3.x/deploying/serverless":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/next/reference/strategies/intro":"docs","docs/0.2.x/testing/intro":"docs","docs/pitfalls-and-bugs":"docs","docs/next/reference/state/freezing":"docs","docs/templates/setting-headers":"docs","docs/strategies/request-state":"docs","docs/0.3.x/snooping":"docs","docs/advanced/routing":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.2.x/templates/intro":"docs","docs/0.3.x/plugins/publishing":"docs","docs/next/reference/testing/intro":"docs","docs/0.3.x/advanced/arch":"docs","docs/0.3.x/styling":"docs","docs/0.2.x/error-pages":"docs","docs/0.2.x/define-app":"docs","docs/next/reference/i18n/defining":"docs","docs/0.2.x/hello-world":"docs","docs/0.3.x/strategies/build-paths":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/0.1.x/strategies/build_state":"docs","docs/0.3.x/plugins/functional":"docs","docs/testing/manual":"docs","docs/0.1.x/intro":"docs","docs/next/reference/plugins/functional":"docs","docs/next/reference/templates/setting-headers":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/updating":"docs","docs/0.3.x/advanced/subsequent-loads":"docs","docs/next/reference/static-content":"docs","docs/0.3.x/define-app":"docs","docs/next/reference/snooping":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.2.x/i18n/intro":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/0.1.x/strategies/intro":"docs","docs/next/core-principles":"docs","docs/plugins/publishing":"docs","docs/next/reference/strategies/revalidation":"docs","docs/0.3.x/plugins/using":"docs","docs/0.3.x/plugins/tinker":"docs","docs/0.3.x/templates/metadata-modification":"docs","docs/0.3.x/pitfalls-and-bugs":"docs","docs/0.2.x/strategies/incremental":"docs","docs/next/reference/testing/checkpoints":"docs","docs/0.3.x/strategies/amalgamation":"docs","docs/0.2.x/static-content":"docs","docs/next/reference/i18n/translations-managers":"docs","docs/0.1.x/cli":"docs","docs/0.2.x/intro":"docs","docs/strategies/incremental":"docs","docs/0.3.x/hello-world":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/0.2.x/advanced/routing":"docs","docs/0.3.x/plugins/control":"docs","docs/0.2.x/views":"docs","docs/0.3.x/advanced/initial-loads":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/0.3.x/strategies/intro":"docs","docs/0.3.x/server-communication":"docs","docs/define-app":"docs","docs/0.3.x/advanced/intro":"docs","docs/i18n/defining":"docs","docs/hello-world":"docs","docs/0.3.x/i18n/defining":"docs","docs/next/reference/plugins/publishing":"docs","docs/deploying/serverful":"docs","docs/0.2.x/styling":"docs","docs/next/reference/strategies/build-paths":"docs","docs/what-is-perseus":"docs","docs/0.3.x/cli":"docs","docs/server-communication":"docs","docs/0.3.x/exporting":"docs","docs/next/reference/testing/manual":"docs","docs/next/tutorials/second-app":"docs","docs/0.3.x/intro":"docs","docs/0.3.x/deploying/relative-paths":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/next/reference/cli":"docs","docs/0.3.x/testing/fantoccini-basics":"docs","docs/0.3.x/strategies/request-state":"docs","docs/next/advanced/initial-loads":"docs","docs/next/intro":"docs","docs/advanced/define_app":"docs","docs/next/reference/define-app":"docs","docs/0.3.x/strategies/revalidation":"docs","docs/deploying/serverless":"docs","docs/deploying/docker":"docs","docs/next/reference/plugins/intro":"docs","comparisons":"comparisons","docs/next/advanced/arch":"docs","docs/0.3.x/i18n/intro":"docs","docs/cli":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/next/reference/strategies/incremental":"docs","docs/0.2.x/testing/manual":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/0.3.x/deploying/serverful":"docs","docs/0.2.x/ejecting":"docs","docs/next/reference/deploying/serverful":"docs","docs/next/reference/deploying/size":"docs","docs/deploying/relative-paths":"docs","docs/next/reference/deploying/serverless":"docs","docs/plugins/intro":"docs","docs/0.3.x/testing/checkpoints":"docs","docs/0.3.x/error-pages":"docs","docs/deploying/intro":"docs","docs/next/reference/plugins/writing":"docs","docs/next/reference/plugins/security":"docs"}';</script>
<script type="module">
    import init, { run } from "https://arctic-hen7.github.io/perseus/.perseus/bundle.js";
    async function main() {
        await init("https://arctic-hen7.github.io/perseus/.perseus/bundle.wasm");
        run();
    }
    main();
</script>
<!--PERSEUS_INTERPOLATED_HEAD_BEGINS--><title data-hk="1.0">Reactive State | Perseus Docs</title><link data-hk="1.1" rel="stylesheet" href=".perseus/static/styles/markdown.css"/><link href=".perseus/static/styles/docs_links_markdown.css" data-hk="1.2" rel="stylesheet"/><link href=".perseus/static/prism.css" data-hk="1.3" rel="stylesheet"/>
<script>window.__PERSEUS_INITIAL_STATE = `{"title":"Reactive State","content":"<h1>Reactive State</h1>\\n<p>Since v0.3.3, Perseus added support for <em>reactive state</em>. Up until now, all our templates have generated state to create one or more pages, and then they've simply used that state to render some stuff. However, in reality, we'll have much more complex data models that involve user interaction. For example, we might have inputs on a page that might change aspects of the view displayed to the user. This used to be done with Sycamore's reactivity system on its own, but Perseus now provides a mechanism to make the state you provide to templates automatically reactive. That means every single property becomes reactive.</p>\\n<p>Just annotate a state <code>struct</code> with <code>#[perseus::make_rx(RxName)]</code>, where <code>RxName</code> is the name of the new reactive <code>struct</code> (e.g. <code>IndexState</code> might become <code>IndexStateRx</code>). This macro wraps every single property in your <code>struct</code> in a <code>Signal</code> and produces a new reactive version that way, implementing <code>perseus::state::MakeRx</code> on the original to provide a method <code>.make_rx()</code> that can be used to convert from the unreactive version to the reactive one (there's also the reverse through <code>perseus::state::MakeUnrx</code>, which is implemented on the new, reactive version). If you have fields on your <code>struct</code> that are themselves <code>struct</code>s, you'll need to nest that reactivity, which you can do by adding <code>#[rx::nested(&quot;field&quot;, FieldRxName)]</code> just underneath the <code>#[make_rx(...)]</code> macro, providing it the name of the field and the type of the reactive version (which you'd generated with <code>#[make_rx(...)]</code>). Notably, <code>#[make_rx(...)]</code> automatically derives <code>Serialize</code>, <code>Deserialize</code>, and <code>Clone</code> on your <code>struct</code> (so don't derive them yourself!).</p>\\n<p><em>Note: Sycamore has a proposal to support fine-grained reactivity like this through observers, which will supersede this when they're released, and they'll make all this even faster! Right now, everything has to be cloned unfortunately.</em></p>\\n<p>Once you've got some reactive versions of your state <code>struct</code>s ready, you should generate the unreactive versions as usual, but then set the first argument on your template function to the reactive version. This requires Perseus to convert between the unreactive and reactive versions in the background, which you can enable by changing <code>#[template(...)]</code> to <code>#[template_rx(...)]</code> and removing the Sycamore <code>#[component]</code> annotation (this is added automatically by <code>#[template_rx(...)]</code>). Behind the scenes, you've just enabled the world's most powerful state platform, and not only will your state be made reactive for you, it will be added to the <em>page state store</em>, a global store that enables Perseus to cache the state of a page. So, if your users start filling out forms on page 1 and then go to page 2, and then come back to page 1, their forms will be just how they left them. (Not sure about you, but it feels to us like it's about time this was the default on the web!)</p>\\n<p>You may be wondering what the benefits of having a reactive state are though. Well, the intention is this: every possible state your page can be in should be representable in your state. That means that, whenever you'd usually declare a new variable in a <code>Signal</code> to handle some state, you can move it into your template's state and handle it there instead, making things cleaner and taking advantage of Perseus' state caching system.</p>\\n<h2>Example</h2>\\n<p>This can all be a bit hard to imagine, so here's how it looks in practice with a simple state involving a <code>username</code> that the user can type in, and then it'll be displayed back to them. You can see the source <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/rx_state/src/index.rs\\">here</a>. Note that this example also uses <a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global\\">global state</a>, which is documented in the next chapter, but you can ignore everything except that first <code>p</code> and <code>input</code> for now.</p>\\n<pre><code class=\\"language-rust\\">use perseus::state::Freeze;\\nuse perseus::{Html, RenderFnResultWithCause, Template};\\nuse sycamore::prelude::*;\\n\\nuse crate::global_state::AppStateRx;\\n\\n// We define a normal \`struct\` and then use \`make_rx\` (which derives \`Serialize\`, \`Deserialize\`, and \`Clone\` automatically)\\n// This will generate a new \`struct\` called \`IndexPropsRx\` (as we asked it to), in which every field is made reactive with a \`Signal\`\\n#[perseus::make_rx(IndexPropsRx)]\\npub struct IndexProps {\\n    pub username: String,\\n}\\n\\n// This special macro (normally we'd use \`template(IndexProps)\`) converts the state we generate elsewhere to a reactive version\\n// We need to tell it the name of the unreactive properties we created to start with (unfortunately the compiler isn't smart enough to figure that out yet)\\n// This will also add our reactive properties to the global state store, and, if they're already there, it'll use the existing one\\n#[perseus::template2(IndexPage)]\\npub fn index_page(IndexPropsRx { username }: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {\\n    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released\\n    let frozen_app = Signal::new(String::new()); // This is not part of our data model, so it's not part of the state properties (everything else should be though)\\n    let render_ctx = perseus::get_render_ctx!();\\n\\n    view! {\\n        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n        input(bind:value = username_2, placeholder = &quot;Username&quot;)\\n        p { (global_state.test.get()) }\\n\\n        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)\\n        a(href = &quot;about&quot;) { &quot;About&quot; }\\n        br()\\n\\n        button(on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {\\n            frozen_app.set(render_ctx.freeze());\\n        })) { &quot;Freeze!&quot; }\\n        p { (frozen_app.get()) }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;index&quot;)\\n        .build_state_fn(get_build_state)\\n        .template(index_page)\\n}\\n\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(\\n    _path: String,\\n    _locale: String,\\n) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {\\n    Ok(IndexProps {\\n        username: &quot;&quot;.to_string(),\\n    })\\n}\\n\\n</code></pre>\\n<p>The only unergonomic thing here is that we have to <code>.clone()</code> the <code>username</code> so that we can both <code>bind:value</code> to it and display it. Note that this will be made unnecessary with Sycamore's new reactive primitives (which will be released soon).</p>\\n<h2>Accessing Another Page's State</h2>\\n<p>Because every template that uses this pattern will have its state added to a special <em>page state store</em>, you can actually access the state of another page quite easily. However, you must be careful doing this, because the other page's state will only be available if it's been loaded by the user. On the server, every page is loaded in its own little silo to prevent corruption, so no other page will ever have been 'loaded'. As for in the browser, you might design an app in which it's only possible to get to a certain page by going through another, but you still can't assume that that page has been loaded, because <a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing\\">state freezing</a> can let a user pick up from any page in your app, and such special rendering flows will be shattered.</p>\\n<p>All that said, you can access another page's state like so (see <a href=\\"https://github.com/arctic-hen7/perseus/blob/main/examples/rx_state/src/about.rs\\">here</a>):</p>\\n<pre><code class=\\"language-rust\\">use crate::index::IndexPropsRx;\\nuse perseus::{get_render_ctx, Html, Template};\\nuse sycamore::prelude::{view, Signal};\\nuse sycamore::view::View;\\n\\n#[perseus::template2(AboutPage)]\\npub fn about_page() -&gt; View&lt;G&gt; {\\n    // Get the page state store manually\\n    // The index page is just an empty string\\n    let index_props_rx = get_render_ctx!().page_state_store.get::&lt;IndexPropsRx&gt;(&quot;&quot;);\\n    // Get the state from the index page\\n    // If the user hasn't visited there yet, this won't exist\\n    let username = match index_props_rx {\\n        Some(IndexPropsRx { username }) =&gt; username,\\n        None =&gt; Signal::new(&quot;&quot;.to_string()),\\n    };\\n\\n    view! {\\n        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;about&quot;).template(about_page)\\n}\\n\\n</code></pre>\\n","sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app\\"><code>define_app!</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views\\">Writing Views</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing\\">State Freezing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating\\">Migrating from v0.2.x</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app\\"><code>define_app</code> in Detail</a></li>\\n</ul>\\n","status":"Next","manifest":{"stable":"0.3.x","outdated":["0.2.x","0.1.x"],"beta":[],"history_map":{"0.1.x":"v0.1.4","0.2.x":"v0.2.3","0.3.x":"HEAD"}},"current_version":"next"}`;</script>
</head>
    <body class="bg-white dark:bg-navy">
        <div id="root"><div id="__perseus_content_initial" class="__perseus_content"><header class="shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20" data-hk="3.0"><div class="flex justify-between" data-hk="3.1"><a href="en-US/" data-hk="3.2" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl">Perseus</a><div data-hk="3.3" class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 "><div data-hk="3.4" class="tham-box"><div class="dark:bg-white tham-inner" data-hk="3.5"></div></div></div><nav data-hk="3.6" class="hidden md:flex"><ul data-hk="3.7" class="mr-5 flex"><li data-hk="4.0" class="m-3 p-1"><a class="px-2" data-hk="4.1" href="en-US/docs">Docs</a></li><li data-hk="4.2" class="m-3 p-1"><a class="px-2" data-hk="4.3" href="en-US/comparisons">Comparisons</a></li><li data-hk="4.4" class="m-3 p-1"><a data-hk="4.5" href="en-US/plugins" class="px-2">Plugins</a></li></ul></nav></div><nav data-hk="3.8" id="mobile_nav_menu" class="md:hidden w-full text-center justify-center overflow-y-scroll hidden"><div class="mr-5 overflow-y-scroll" data-hk="3.9" style="max-height: 500px"><ul data-hk="3.10"><li data-hk="5.0" class="m-3 p-1"><a data-hk="5.1" class="px-2" href="en-US/docs">Docs</a></li><li data-hk="5.2" class="m-3 p-1"><a href="en-US/comparisons" data-hk="5.3" class="px-2">Comparisons</a></li><li class="m-3 p-1" data-hk="5.4"><a href="en-US/plugins" data-hk="5.5" class="px-2">Plugins</a></li></ul><hr data-hk="3.11"/><div data-hk="3.12" class="text-left p-3"><!--#--><!----><select data-hk="6.0" class="p-2 rounded-md text-white bg-indigo-500"><option selected="" data-hk="6.1" value="next">Next (unreleased)</option><!--#--><!--/--><option data-hk="6.2" value="0.3.x">v⁨0.3.x⁩ (stable)</option><!--#--><option value="0.2.x" data-hk="6.3">v⁨0.2.x⁩ (outdated)</option><option data-hk="6.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.13" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
</ul>
</div></div></div></nav></header><div data-hk="3.14" class="mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex"><div data-hk="3.15" class="flex w-full"><div class="h-full hidden md:block max-w-xs w-full border-r" data-hk="3.16"><div data-hk="3.17" class="mr-5"><div class="text-left text-black dark:text-white p-3" data-hk="3.18"><aside data-hk="3.19"><!--#--><!----><select data-hk="7.0" class="p-2 rounded-md text-white bg-indigo-500"><option value="next" data-hk="7.1" selected="">Next (unreleased)</option><!--#--><!--/--><option data-hk="7.2" value="0.3.x">v⁨0.3.x⁩ (stable)</option><!--#--><option data-hk="7.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option data-hk="7.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div class="docs-links-markdown" data-hk="3.20"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
</ul>
</div></aside></div></div></div><div class="h-full flex w-full" data-hk="3.21"><div class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl" data-hk="3.22"><!--#--><div data-hk="3.23" class="ring-4 ring-orange-400 p-4 rounded-lg mt-1"><div class="flex flex-col 2xs:flex-row dark:text-white" data-hk="3.24"><span class="self-center mr-2" style="fill: #fb923c;" data-hk="3.25"><svg xmlns="http://www.w3.org/2000/svg" height="auto" viewBox="0 0 24 24" width="2.25rem" fill="\#000000"><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk="3.26">This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href="en-US/docs/0.3.x/intro" class="underline">here</a>.</p></div></div><!--/--><main data-hk="3.27" class="text-black dark:text-white"><div data-hk="2.0" class="markdown"><h1>Reactive State</h1>
<p>Since v0.3.3, Perseus added support for <em>reactive state</em>. Up until now, all our templates have generated state to create one or more pages, and then they've simply used that state to render some stuff. However, in reality, we'll have much more complex data models that involve user interaction. For example, we might have inputs on a page that might change aspects of the view displayed to the user. This used to be done with Sycamore's reactivity system on its own, but Perseus now provides a mechanism to make the state you provide to templates automatically reactive. That means every single property becomes reactive.</p>
<p>Just annotate a state <code>struct</code> with <code>#[perseus::make_rx(RxName)]</code>, where <code>RxName</code> is the name of the new reactive <code>struct</code> (e.g. <code>IndexState</code> might become <code>IndexStateRx</code>). This macro wraps every single property in your <code>struct</code> in a <code>Signal</code> and produces a new reactive version that way, implementing <code>perseus::state::MakeRx</code> on the original to provide a method <code>.make_rx()</code> that can be used to convert from the unreactive version to the reactive one (there's also the reverse through <code>perseus::state::MakeUnrx</code>, which is implemented on the new, reactive version). If you have fields on your <code>struct</code> that are themselves <code>struct</code>s, you'll need to nest that reactivity, which you can do by adding <code>#[rx::nested(&quot;field&quot;, FieldRxName)]</code> just underneath the <code>#[make_rx(...)]</code> macro, providing it the name of the field and the type of the reactive version (which you'd generated with <code>#[make_rx(...)]</code>). Notably, <code>#[make_rx(...)]</code> automatically derives <code>Serialize</code>, <code>Deserialize</code>, and <code>Clone</code> on your <code>struct</code> (so don't derive them yourself!).</p>
<p><em>Note: Sycamore has a proposal to support fine-grained reactivity like this through observers, which will supersede this when they're released, and they'll make all this even faster! Right now, everything has to be cloned unfortunately.</em></p>
<p>Once you've got some reactive versions of your state <code>struct</code>s ready, you should generate the unreactive versions as usual, but then set the first argument on your template function to the reactive version. This requires Perseus to convert between the unreactive and reactive versions in the background, which you can enable by changing <code>#[template(...)]</code> to <code>#[template_rx(...)]</code> and removing the Sycamore <code>#[component]</code> annotation (this is added automatically by <code>#[template_rx(...)]</code>). Behind the scenes, you've just enabled the world's most powerful state platform, and not only will your state be made reactive for you, it will be added to the <em>page state store</em>, a global store that enables Perseus to cache the state of a page. So, if your users start filling out forms on page 1 and then go to page 2, and then come back to page 1, their forms will be just how they left them. (Not sure about you, but it feels to us like it's about time this was the default on the web!)</p>
<p>You may be wondering what the benefits of having a reactive state are though. Well, the intention is this: every possible state your page can be in should be representable in your state. That means that, whenever you'd usually declare a new variable in a <code>Signal</code> to handle some state, you can move it into your template's state and handle it there instead, making things cleaner and taking advantage of Perseus' state caching system.</p>
<h2>Example</h2>
<p>This can all be a bit hard to imagine, so here's how it looks in practice with a simple state involving a <code>username</code> that the user can type in, and then it'll be displayed back to them. You can see the source <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/rx_state/src/index.rs">here</a>. Note that this example also uses <a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">global state</a>, which is documented in the next chapter, but you can ignore everything except that first <code>p</code> and <code>input</code> for now.</p>
<pre><code class="language-rust">use perseus::state::Freeze;
use perseus::{Html, RenderFnResultWithCause, Template};
use sycamore::prelude::*;

use crate::global_state::AppStateRx;

// We define a normal `struct` and then use `make_rx` (which derives `Serialize`, `Deserialize`, and `Clone` automatically)
// This will generate a new `struct` called `IndexPropsRx` (as we asked it to), in which every field is made reactive with a `Signal`
#[perseus::make_rx(IndexPropsRx)]
pub struct IndexProps {
    pub username: String,
}

// This special macro (normally we'd use `template(IndexProps)`) converts the state we generate elsewhere to a reactive version
// We need to tell it the name of the unreactive properties we created to start with (unfortunately the compiler isn't smart enough to figure that out yet)
// This will also add our reactive properties to the global state store, and, if they're already there, it'll use the existing one
#[perseus::template2(IndexPage)]
pub fn index_page(IndexPropsRx { username }: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {
    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released
    let frozen_app = Signal::new(String::new()); // This is not part of our data model, so it's not part of the state properties (everything else should be though)
    let render_ctx = perseus::get_render_ctx!();

    view! {
        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }
        input(bind:value = username_2, placeholder = &quot;Username&quot;)
        p { (global_state.test.get()) }

        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)
        a(href = &quot;about&quot;) { &quot;About&quot; }
        br()

        button(on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {
            frozen_app.set(render_ctx.freeze());
        })) { &quot;Freeze!&quot; }
        p { (frozen_app.get()) }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;index&quot;)
        .build_state_fn(get_build_state)
        .template(index_page)
}

#[perseus::autoserde(build_state)]
pub async fn get_build_state(
    _path: String,
    _locale: String,
) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {
    Ok(IndexProps {
        username: &quot;&quot;.to_string(),
    })
}

</code></pre>
<p>The only unergonomic thing here is that we have to <code>.clone()</code> the <code>username</code> so that we can both <code>bind:value</code> to it and display it. Note that this will be made unnecessary with Sycamore's new reactive primitives (which will be released soon).</p>
<h2>Accessing Another Page's State</h2>
<p>Because every template that uses this pattern will have its state added to a special <em>page state store</em>, you can actually access the state of another page quite easily. However, you must be careful doing this, because the other page's state will only be available if it's been loaded by the user. On the server, every page is loaded in its own little silo to prevent corruption, so no other page will ever have been 'loaded'. As for in the browser, you might design an app in which it's only possible to get to a certain page by going through another, but you still can't assume that that page has been loaded, because <a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">state freezing</a> can let a user pick up from any page in your app, and such special rendering flows will be shattered.</p>
<p>All that said, you can access another page's state like so (see <a href="https://github.com/arctic-hen7/perseus/blob/main/examples/rx_state/src/about.rs">here</a>):</p>
<pre><code class="language-rust">use crate::index::IndexPropsRx;
use perseus::{get_render_ctx, Html, Template};
use sycamore::prelude::{view, Signal};
use sycamore::view::View;

#[perseus::template2(AboutPage)]
pub fn about_page() -&gt; View&lt;G&gt; {
    // Get the page state store manually
    // The index page is just an empty string
    let index_props_rx = get_render_ctx!().page_state_store.get::&lt;IndexPropsRx&gt;(&quot;&quot;);
    // Get the state from the index page
    // If the user hasn't visited there yet, this won't exist
    let username = match index_props_rx {
        Some(IndexPropsRx { username }) =&gt; username,
        None =&gt; Signal::new(&quot;&quot;.to_string()),
    };

    view! {
        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;about&quot;).template(about_page)
}

</code></pre>
</div></main></div></div></div></div><footer data-hk="3.28" class="w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep"><p data-hk="3.29" class="dark:text-white mx-5 text-center"><span data-hk="3.30">© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> ⁨2021⁩, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer><script data-hk="2.1" src=".perseus/static/prism.js" defer=""></script><script data-hk="2.2">window.Prism.highlightAll();</script></div></div>
    </body>
</html>
