<!DOCTYPE html>
<html lang="en" class="light">
    <head>
<base href="https://arctic-hen7.github.io/perseus/" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href=".perseus/static/tailwind.css" />
        <link rel="stylesheet" href=".perseus/static/styles/style.css" />
    <script>window.__PERSEUS_RENDER_CFG = '{"docs/0.2.x/what-is-perseus":"docs","docs/0.2.x/templates/setting-headers":"docs","docs/0.1.x/arch":"docs","docs/0.3.x/what-is-perseus":"docs","docs/0.1.x/building":"docs","docs/0.3.x/plugins/intro":"docs","docs/0.2.x/i18n/using":"docs","docs/0.3.x/strategies/revalidation":"docs","plugins":"plugins","docs/0.3.x/templates/metadata-modification":"docs","docs/0.2.x/strategies/request-state":"docs","docs/0.1.x/config_managers":"docs","docs/next/what-is-perseus":"docs","docs/0.2.x/second-app":"docs","docs/0.1.x/strategies/build_state":"docs","docs/next/reference/state/freezing":"docs","docs/next/reference/state/idb-freezing":"docs","docs/0.1.x/setup":"docs","docs/0.1.x/tutorials/first_app/intro":"docs","docs/0.3.x/error-pages":"docs","docs/0.1.x/strategies/incremental":"docs","docs/0.3.x/advanced/define_app":"docs","docs/next/reference/plugins/functional":"docs","docs/0.2.x/deploying/exporting":"docs","docs/next/advanced/initial-loads":"docs","docs/0.2.x/i18n/intro":"docs","docs/next/tutorials/second-app":"docs","docs/0.3.x/i18n/defining":"docs","docs/cli":"docs","docs/next/advanced/intro":"docs","docs/0.3.x/plugins/functional":"docs","docs/next/reference/templates/intro":"docs","docs/0.1.x/serving":"docs","docs/next/advanced/subsequent-loads":"docs","docs/0.2.x/updating":"docs","docs/0.3.x/exporting":"docs","docs/next/advanced/arch":"docs","docs/define-app":"docs","docs/0.2.x/strategies/revalidation":"docs","docs/second-app":"docs","comparisons":"comparisons","docs/0.3.x/static-content":"docs","docs/next/reference/strategies/build-state":"docs","docs/next/reference/deploying/intro":"docs","docs/0.3.x/advanced/arch":"docs","docs/advanced/subsequent-loads":"docs","docs/plugins/writing":"docs","docs/advanced/initial-loads":"docs","docs/plugins/using":"docs","docs/0.3.x/deploying/intro":"docs","docs/0.1.x/strategies/revalidation":"docs","docs/next/reference/engines":"docs","docs/next/reference/state/global":"docs","docs/testing/fantoccini-basics":"docs","docs/updating":"docs","docs/0.3.x/plugins/using":"docs","docs/next/reference/ejecting":"docs","docs/0.2.x/advanced/intro":"docs","docs/next/reference/plugins/writing":"docs","docs/views":"docs","docs/0.3.x/second-app":"docs","docs/next/reference/deploying/docker":"docs","docs/0.3.x/plugins/tinker":"docs","docs/next/reference/styling":"docs","docs/next/reference/debugging":"docs","docs/next/reference/server-communication":"docs","docs/i18n/intro":"docs","docs/advanced/intro":"docs","docs/0.3.x/testing/intro":"docs","docs/0.1.x/strategies/intro":"docs","docs/next/reference/plugins/intro":"docs","docs/strategies/build-paths":"docs","docs/0.3.x/testing/manual":"docs","docs/0.2.x/config-managers":"docs","index":"index","docs/0.3.x/deploying/serverless":"docs","docs/deploying/intro":"docs","docs/0.2.x/i18n/translations-managers":"docs","docs/next/reference/error-pages":"docs","docs/hydration":"docs","docs/0.2.x/hello-world":"docs","docs/0.1.x/cli":"docs","docs/0.3.x/debugging":"docs","docs/templates/intro":"docs","docs/0.3.x/templates/intro":"docs","docs/i18n/using":"docs","docs/0.2.x/define-app":"docs","docs/0.3.x/ejecting":"docs","docs/0.2.x/testing/intro":"docs","docs/i18n/defining":"docs","docs/next/reference/views":"docs","docs/0.3.x/snooping":"docs","docs/deploying/serverless":"docs","docs/plugins/intro":"docs","docs/next/intro":"docs","docs/deploying/docker":"docs","docs/0.2.x/i18n/other-engines":"docs","docs/next/reference/stores":"docs","docs/0.3.x/deploying/docker":"docs","docs/0.1.x/strategies/request_state":"docs","docs/next/advanced/routing":"docs","docs/0.2.x/strategies/amalgamation":"docs","docs/plugins/publishing":"docs","docs/next/reference/snooping":"docs","docs/next/reference/deploying/serverless":"docs","docs/advanced/routing":"docs","docs/testing/manual":"docs","docs/strategies/intro":"docs","docs/static-content":"docs","docs/strategies/revalidation":"docs","docs/next/reference/testing/intro":"docs","docs/0.2.x/testing/checkpoints":"docs","docs/next/reference/i18n/intro":"docs","docs/0.3.x/plugins/security":"docs","docs/what-is-perseus":"docs","docs/0.2.x/styling":"docs","docs/0.2.x/strategies/build-state":"docs","docs/next/reference/plugins/security":"docs","docs/server-communication":"docs","docs/0.3.x/testing/checkpoints":"docs","docs/0.2.x/advanced/arch":"docs","docs/0.1.x/templates":"docs","docs/0.3.x/hello-world":"docs","docs/0.3.x/hydration":"docs","docs/0.1.x/error_pages":"docs","docs/next/reference/i18n/translations-managers":"docs","docs/advanced/arch":"docs","docs/templates/metadata-modification":"docs","docs/0.3.x/i18n/intro":"docs","docs/deploying/size":"docs","docs/next/reference/strategies/build-paths":"docs","docs/testing/intro":"docs","docs/next/reference/strategies/revalidation":"docs","docs/0.3.x/updating":"docs","docs/next/reference/strategies/intro":"docs","docs/0.3.x/templates/setting-headers":"docs","docs/0.3.x/deploying/serverful":"docs","docs/testing/checkpoints":"docs","docs/0.3.x/plugins/control":"docs","docs/next/reference/strategies/amalgamation":"docs","docs/0.2.x/templates/intro":"docs","docs/0.3.x/server-communication":"docs","docs/next/reference/i18n/other-engines":"docs","docs/0.3.x/advanced/initial-loads":"docs","docs/0.2.x/error-pages":"docs","docs/0.2.x/i18n/defining":"docs","docs/next/reference/strategies/request-state":"docs","docs/next/reference/state/rx":"docs","docs/0.2.x/templates/metadata-modification":"docs","docs/templates/setting-headers":"docs","docs/0.2.x/ejecting":"docs","docs/styling":"docs","docs/0.1.x/tutorials/first_app/app":"docs","docs/plugins/control":"docs","docs/next/reference/updating":"docs","docs/0.3.x/advanced/subsequent-loads":"docs","docs/0.3.x/plugins/publishing":"docs","docs/0.3.x/i18n/other-engines":"docs","docs/i18n/other-engines":"docs","docs/0.3.x/views":"docs","docs/0.1.x/integrations/actix-web":"docs","docs/0.2.x/debugging":"docs","docs/0.2.x/testing/manual":"docs","docs/next/reference/deploying/relative-paths":"docs","docs/next/reference/plugins/control":"docs","docs/0.1.x/intro":"docs","docs/next/reference/i18n/using":"docs","docs/0.3.x/i18n/using":"docs","docs/0.1.x/tutorials/first_app/template":"docs","docs/0.3.x/plugins/writing":"docs","docs/error-pages":"docs","docs":"docs","docs/next/reference/i18n/defining":"docs","docs/next/reference/hydration":"docs","docs/0.3.x/deploying/relative-paths":"docs","docs/0.3.x/pitfalls-and-bugs":"docs","docs/snooping":"docs","docs/next/reference/testing/manual":"docs","docs/0.2.x/testing/fantoccini-basics":"docs","docs/next/reference/plugins/tinker":"docs","docs/next/advanced/define_app":"docs","docs/0.2.x/strategies/incremental":"docs","docs/0.2.x/intro":"docs","docs/0.3.x/deploying/size":"docs","docs/next/reference/strategies/incremental":"docs","docs/next/reference/templates/metadata-modification":"docs","docs/deploying/serverful":"docs","docs/0.3.x/define-app":"docs","docs/0.1.x/tutorials/first_app/setup":"docs","docs/0.3.x/strategies/build-paths":"docs","docs/next/reference/pitfalls-and-bugs":"docs","docs/next/reference/cli":"docs","docs/0.3.x/cli":"docs","docs/0.2.x/advanced/subsequent-loads":"docs","docs/0.3.x/strategies/intro":"docs","docs/next/reference/deploying/serverful":"docs","docs/0.3.x/stores":"docs","docs/0.2.x/views":"docs","docs/next/reference/templates/setting-headers":"docs","docs/0.3.x/testing/fantoccini-basics":"docs","docs/0.3.x/strategies/incremental":"docs","docs/plugins/tinker":"docs","docs/0.2.x/cli":"docs","docs/0.1.x/routing":"docs","docs/next/tutorials/hello-world":"docs","docs/ejecting":"docs","docs/next/reference/plugins/using":"docs","docs/next/reference/testing/checkpoints":"docs","docs/debugging":"docs","docs/strategies/request-state":"docs","docs/0.1.x/strategies/build_paths":"docs","docs/next/core-principles":"docs","docs/deploying/relative-paths":"docs","docs/0.2.x/static-content":"docs","docs/next/reference/deploying/size":"docs","docs/0.3.x/intro":"docs","docs/plugins/functional":"docs","docs/i18n/translations-managers":"docs","docs/stores":"docs","docs/next/reference/define-app":"docs","docs/0.3.x/advanced/routing":"docs","docs/exporting":"docs","docs/pitfalls-and-bugs":"docs","docs/next/reference/exporting":"docs","docs/strategies/amalgamation":"docs","docs/0.2.x/strategies/build-paths":"docs","docs/0.3.x/strategies/build-state":"docs","docs/hello-world":"docs","docs/0.2.x/strategies/intro":"docs","docs/next/reference/plugins/publishing":"docs","docs/strategies/build-state":"docs","docs/0.2.x/advanced/initial-loads":"docs","docs/next/reference/testing/fantoccini-basics":"docs","docs/0.2.x/deploying/intro":"docs","docs/intro":"docs","docs/advanced/define_app":"docs","docs/strategies/incremental":"docs","docs/0.3.x/styling":"docs","docs/0.2.x/advanced/routing":"docs","docs/next/reference/static-content":"docs","docs/0.3.x/strategies/request-state":"docs","docs/0.3.x/i18n/translations-managers":"docs","docs/plugins/security":"docs","docs/0.3.x/advanced/intro":"docs","docs/next/reference/templates/router-state":"docs","docs/0.3.x/strategies/amalgamation":"docs"}';</script>
<script type="module">
    import init, { run } from "https://arctic-hen7.github.io/perseus/.perseus/bundle.js";
    async function main() {
        await init("https://arctic-hen7.github.io/perseus/.perseus/bundle.wasm");
        run();
    }
    main();
</script>
<!--PERSEUS_INTERPOLATED_HEAD_BEGINS--><title data-hk="1.0">State Freezing | Perseus Docs</title><link data-hk="1.1" href=".perseus/static/styles/markdown.css" rel="stylesheet"/><link data-hk="1.2" rel="stylesheet" href=".perseus/static/styles/docs_links_markdown.css"/><link rel="stylesheet" href=".perseus/static/prism.css" data-hk="1.3"/>
<script>window.__PERSEUS_INITIAL_STATE = `{"title":"State Freezing","content":"<h1>State Freezing</h1>\\n<p>If you use the reactive and global state systems to their full potential, your entire app can be represented as its state. So what if you could make all that state unreactive again, serialize it to a string, and keep it for later? Well, you'd be able to let your users pick up at the <em>exact</em> same place they were when they come back later. Imagine you're in the middle of filling out some forms and then your computer crashes. You boot back up and go to the website you were on. If it's built with Perseus and state freezing occurred just before the crash, you're right back to where you were. Same page, same inputs, same everything.</p>\\n<p>Specifically, Perseus achieves this by serializing the global state and the page state store, along with the route that the user's currently on. You can invoke this easily by running <code>.freeze()</code> on the render context, which you can access with <code>perseus::get_render_ctx!()</code>. Best of all, if state hasn't been used yet (e.g. a page hasn't been visited), it won't be cached, because it doesn't need to be. That also applies to global state, meaning the size of your frozen output is minimized.</p>\\n<h2>Example</h2>\\n<p>You can easily imperatively instruct your app to freeze itself like so (see <a href=\\"https://github.com/arctic-hen7/perseus/tree/main/examples/rx_state/src/index.rs\\">here</a>):</p>\\n<pre><code class=\\"language-rust\\">use perseus::state::Freeze;\\nuse perseus::{Html, RenderFnResultWithCause, Template};\\nuse sycamore::prelude::*;\\n\\nuse crate::global_state::AppStateRx;\\n\\n// We define a normal \`struct\` and then use \`make_rx\` (which derives \`Serialize\`, \`Deserialize\`, and \`Clone\` automatically)\\n// This will generate a new \`struct\` called \`IndexPropsRx\` (as we asked it to), in which every field is made reactive with a \`Signal\`\\n#[perseus::make_rx(IndexPropsRx)]\\npub struct IndexProps {\\n    pub username: String,\\n}\\n\\n// This special macro (normally we'd use \`template(IndexProps)\`) converts the state we generate elsewhere to a reactive version\\n// We need to tell it the name of the unreactive properties we created to start with (unfortunately the compiler isn't smart enough to figure that out yet)\\n// This will also add our reactive properties to the global state store, and, if they're already there, it'll use the existing one\\n#[perseus::template_rx(IndexPage)]\\npub fn index_page(IndexPropsRx { username }: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {\\n    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released\\n    let frozen_app = Signal::new(String::new()); // This is not part of our data model, so it's not part of the state properties (everything else should be though)\\n    let frozen_app_2 = frozen_app.clone();\\n    let frozen_app_3 = frozen_app.clone();\\n    let render_ctx = perseus::get_render_ctx!();\\n\\n    view! {\\n        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }\\n        input(bind:value = username_2, placeholder = &quot;Username&quot;)\\n        p { (global_state.test.get()) }\\n\\n        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)\\n        a(href = &quot;about&quot;) { &quot;About&quot; }\\n        br()\\n\\n        button(on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {\\n            frozen_app.set(render_ctx.freeze());\\n        })) { &quot;Freeze!&quot; }\\n        p { (frozen_app.get()) }\\n\\n        input(bind:value = frozen_app_2, placeholder = &quot;Frozen state&quot;)\\n        button(on:click = cloned!(frozen_app_3, render_ctx =&gt; move |_| {\\n            render_ctx.thaw(&amp;frozen_app_3.get(), perseus::state::ThawPrefs {\\n                page: perseus::state::PageThawPrefs::IncludeAll,\\n                global_prefer_frozen: true\\n            }).unwrap();\\n        })) { &quot;Thaw...&quot; }\\n    }\\n}\\n\\npub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {\\n    Template::new(&quot;index&quot;)\\n        .build_state_fn(get_build_state)\\n        .template(index_page)\\n}\\n\\n#[perseus::autoserde(build_state)]\\npub async fn get_build_state(\\n    _path: String,\\n    _locale: String,\\n) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {\\n    Ok(IndexProps {\\n        username: &quot;&quot;.to_string(),\\n    })\\n}\\n\\n</code></pre>\\n<h2>Thawing</h2>\\n<p>Recovering your app's state from a frozen state is called <em>thawing</em> in Perseus (basically like hydration for state, but remember that hydration is for views and thawing is for state!), and it can occur gradually and automatically once you provide Perseus a frozen state to use, which you can do by calling <code>.thaw()</code> on the render context (which you can get with <code>perseus::get_render_ctx!()</code>). How you store and retrieve frozen state is entirely up to you. For example, you could store the user's last state in a database and then fetch that when the user logs in, or you could store it in IndexedDB and have even logging in be covered by it (if authentication tokens are part of your global state).</p>\\n<p>One important thing to understand about thawing though is how Perseus decided what state to use for a template, because there can be up to three options. Every template that accepts state will have generated state that's provided to it from the generation proceses on the server, but there could also be a frozen state and an active state (some state that's already been made reactive). The server-generated state is always the lowest priority, and it will be used if no active or frozen state is available. However, deciding between frozen and active state is more complicated. If only one is available, it will of course be used, but it both are available, the choice is yours. You can represent this choice through the <code>ThawPrefs</code> <code>struct</code>, which must be provided to a call to <code>.thaw()</code> as the second argument. This has two fields, one for page state, and another for global state. For global state, you can set the <code>global_prefers_frozen</code> field to <code>true</code> if you want to override active global state with a frozen one. For page state, you'll use <code>PageThawPrefs</code>, which can be set to <code>IncludeAll</code> (all pages will prefer frozen state), <code>Include(Vec&lt;String&gt;)</code> (the listed pages will prefer frozen state, all others will prefer active state), or <code>Exclude(Vec&lt;String&gt;)</code> (the listed pages will prefer active state, all others will prefer frozen state). There's no <code>ExcludeAll</code> option because that would defeat the entire purpose of thawing.</p>\\n<p>It may at first be tempting to use <code>IncludeAll</code>, but this is an important UX decision that you should consider carefully. Using frozen state when active state isn't available is automatic, but preferring frozen state <em>over</em> active state translates to something like this: a user does some stuff, then state is thawed, everything they did at the start is gone and replaced with whatever they did in the previous session. This might be entirely reasonable in pages that can only be accessed after thawing is complete, but in pages that are accessible at all times, this could be extremely irritating to your users!</p>\\n<details>\\n<summary>Thawing isn't working...</summary>\\n<p>It may seem sometimes like thawing has completely failed, and this is usually for one of two reasons.</p>\\n<ol>\\n<li>You're extracting the state of another page.</li>\\n<li>You're getting the global state without having it as the second argument to your template function. (In other words, you're getting it manually through <code>perseus::get_render_ctx!().global_state.borrow()</code>).</li>\\n</ol>\\n<p>In the first case, the reasoning is simple. Statw thawing is a gradual process, so the state for a page won't be thawed until the user actually visits that page. This is why it's much better to use global state for state that needs to be shared between pages, and you should generally avoid extracting state from other pages.</p>\\n<p>In the second case, the reason is similar. When you get the global state directly in this way, you bypass the thawing process altogether, meaning thawed state won't show up. If you need to access the global state, you should do it by making it the second argument to your template function (as documented <a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global\\">here</a>).</p>\\n<p><em>Note: in a future version of Perseus, thawing logic may be moved so that direct access does become possible, but it's currently not.</em></p>\\n</details>\\n<p><em>Note: currently, Perseus' thawing process requires navigating to another page to work due to problems in Sycamore's router. These will be resolved in some form before v0.3.3.</em></p>\\n","sidebar_content":"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/intro\\">Introduction</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus\\">What is Perseus?</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles\\">Core Principles</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app\\"><code>define_app!</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views\\">Writing Views</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging\\">Debugging</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers\\">Modifying HTTP Headers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state\\">Listening to the Router</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages\\">Error Pages</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content\\">Static Content</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro\\">Internationalization</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining\\">Defining Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using\\">Using Translations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers\\">Translations Managers</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state\\">Build State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths\\">Build Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state\\">Request State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation\\">Revalidation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental\\">Incremental Generation</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration\\">Hydration</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx\\">Reactive State</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global\\">Global State</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing\\">State Freezing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing\\">Freezing to IndexedDB</a></li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli\\">CLI</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting\\">Ejecting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro\\">Testing</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints\\">Checkpoints</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics\\">Fantoccini Basics</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling\\">Styling</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication\\">Communicating with a Server</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores\\">Stores</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting\\">Static Exporting</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro\\">Plugins</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional\\">Functional Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control\\">Control Actions</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using\\">Using Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing\\">Writing Plugins</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security\\">Security Considerations</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines\\">Engines</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro\\">Deploying</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful\\">Server Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless\\">Serverless Deployment</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size\\">Optimizing Code Size</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths\\">Relative Paths</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating\\">Migrating from v0.2.x</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch\\">Architecture</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads\\">Initial Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads\\">Subsequent Loads</a></li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing\\">Routing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app\\"><code>define_app</code> in Detail</a></li>\\n</ul>\\n","status":"Next","manifest":{"stable":"0.3.x","outdated":["0.2.x","0.1.x"],"beta":[],"history_map":{"0.2.x":"v0.2.3","0.3.x":"HEAD","0.1.x":"v0.1.4"}},"current_version":"next"}`;</script>
</head>
    <body class="bg-white dark:bg-navy">
        <div id="root"><div id="__perseus_content_initial" class="__perseus_content"><header data-hk="3.0" class="shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20"><div class="flex justify-between" data-hk="3.1"><a data-hk="3.2" href="en-US/" class="justify-self-start self-center m-3 ml-5 text-md sm:text-2xl">Perseus</a><div data-hk="3.3" class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 "><div data-hk="3.4" class="tham-box"><div class="dark:bg-white tham-inner" data-hk="3.5"></div></div></div><nav data-hk="3.6" class="hidden md:flex"><ul data-hk="3.7" class="mr-5 flex"><li class="m-3 p-1" data-hk="4.0"><a data-hk="4.1" href="en-US/docs" class="px-2">Docs</a></li><li data-hk="4.2" class="m-3 p-1"><a href="en-US/comparisons" class="px-2" data-hk="4.3">Comparisons</a></li><li class="m-3 p-1" data-hk="4.4"><a data-hk="4.5" class="px-2" href="en-US/plugins">Plugins</a></li></ul></nav></div><nav data-hk="3.8" class="md:hidden w-full text-center justify-center overflow-y-scroll hidden" id="mobile_nav_menu"><div style="max-height: 500px" class="mr-5 overflow-y-scroll" data-hk="3.9"><ul data-hk="3.10"><li data-hk="5.0" class="m-3 p-1"><a class="px-2" href="en-US/docs" data-hk="5.1">Docs</a></li><li class="m-3 p-1" data-hk="5.2"><a href="en-US/comparisons" class="px-2" data-hk="5.3">Comparisons</a></li><li data-hk="5.4" class="m-3 p-1"><a data-hk="5.5" class="px-2" href="en-US/plugins">Plugins</a></li></ul><hr data-hk="3.11"/><div data-hk="3.12" class="text-left p-3"><!--#--><!----><select class="p-2 rounded-md text-white bg-indigo-500" data-hk="6.0"><option data-hk="6.1" value="next" selected="">Next (unreleased)</option><!--#--><!--/--><option data-hk="6.2" value="0.3.x">v⁨0.3.x⁩ (stable)</option><!--#--><option value="0.2.x" data-hk="6.3">v⁨0.2.x⁩ (outdated)</option><option data-hk="6.4" value="0.1.x">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.13" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines">Engines</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
</ul>
</div></div></div></nav></header><div class="mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex" data-hk="3.14"><div class="flex w-full" data-hk="3.15"><div data-hk="3.16" class="h-full hidden md:block max-w-xs w-full border-r"><div data-hk="3.17" class="mr-5"><div class="text-left text-black dark:text-white p-3" data-hk="3.18"><aside data-hk="3.19"><!--#--><!----><select data-hk="7.0" class="p-2 rounded-md text-white bg-indigo-500"><option data-hk="7.1" value="next" selected="">Next (unreleased)</option><!--#--><!--/--><option value="0.3.x" data-hk="7.2">v⁨0.3.x⁩ (stable)</option><!--#--><option data-hk="7.3" value="0.2.x">v⁨0.2.x⁩ (outdated)</option><option value="0.1.x" data-hk="7.4">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk="3.20" class="docs-links-markdown"><h1>Introduction</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/intro">Introduction</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/what-is-perseus">What is Perseus?</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/core-principles">Core Principles</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/hello-world">Hello World!</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/tutorials/second-app">Your Second App</a></li>
</ul>
<hr />
<h1>Reference</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/define-app"><code>define_app!</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/views">Writing Views</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/debugging">Debugging</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/intro">Templates and Routing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/metadata-modification">Modifying the <code>&lt;head&gt;</code></a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/setting-headers">Modifying HTTP Headers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/templates/router-state">Listening to the Router</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/error-pages">Error Pages</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/static-content">Static Content</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/intro">Internationalization</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/defining">Defining Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/using">Using Translations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/translations-managers">Translations Managers</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/i18n/other-engines">Other Translation Engines</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/intro">Rendering Strategies</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-state">Build State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/build-paths">Build Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/request-state">Request State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/revalidation">Revalidation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/incremental">Incremental Generation</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/strategies/amalgamation">State Amalgamation</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/hydration">Hydration</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/rx">Reactive State</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">Global State</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/freezing">State Freezing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/idb-freezing">Freezing to IndexedDB</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/cli">CLI</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/ejecting">Ejecting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/snooping">Snooping</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/intro">Testing</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/checkpoints">Checkpoints</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/fantoccini-basics">Fantoccini Basics</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/testing/manual">Manual Testing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/styling">Styling</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/server-communication">Communicating with a Server</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/stores">Stores</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/exporting">Static Exporting</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/intro">Plugins</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/functional">Functional Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/control">Control Actions</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/using">Using Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/tinker">The <code>tinker</code> Action</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/writing">Writing Plugins</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/security">Security Considerations</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/plugins/publishing">Publishing Plugins</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/engines">Engines</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/intro">Deploying</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverful">Server Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/serverless">Serverless Deployment</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/size">Optimizing Code Size</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/relative-paths">Relative Paths</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/deploying/docker">Docker Deployment</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/updating">Migrating from v0.2.x</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/pitfalls-and-bugs">Common Pitfalls and Known Bugs</a></li>
</ul>
<hr />
<h1>Advanced</h1>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/intro">Under the Hood</a>
<ul>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/arch">Architecture</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/initial-loads">Initial Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/subsequent-loads">Subsequent Loads</a></li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/routing">Routing</a></li>
</ul>
</li>
<li><a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/advanced/define_app"><code>define_app</code> in Detail</a></li>
</ul>
</div></aside></div></div></div><div data-hk="3.21" class="h-full flex w-full"><div class="px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl" data-hk="3.22"><!--#--><div class="ring-4 ring-orange-400 p-4 rounded-lg mt-1" data-hk="3.23"><div class="flex flex-col 2xs:flex-row dark:text-white" data-hk="3.24"><span style="fill: #fb923c;" class="self-center mr-2" data-hk="3.25"><svg xmlns="http://www.w3.org/2000/svg" height="auto" viewBox="0 0 24 24" width="2.25rem" fill="\#000000"><path d="M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z"/></svg></span><p data-hk="3.26">This version of the documentation is for a version that has not yet been released, and features documented here may not be present in the latest release. You can see the latest stable version of the docs <a href="en-US/docs/0.3.x/intro" class="underline">here</a>.</p></div></div><!--/--><main data-hk="3.27" class="text-black dark:text-white"><div data-hk="2.0" class="markdown"><h1>State Freezing</h1>
<p>If you use the reactive and global state systems to their full potential, your entire app can be represented as its state. So what if you could make all that state unreactive again, serialize it to a string, and keep it for later? Well, you'd be able to let your users pick up at the <em>exact</em> same place they were when they come back later. Imagine you're in the middle of filling out some forms and then your computer crashes. You boot back up and go to the website you were on. If it's built with Perseus and state freezing occurred just before the crash, you're right back to where you were. Same page, same inputs, same everything.</p>
<p>Specifically, Perseus achieves this by serializing the global state and the page state store, along with the route that the user's currently on. You can invoke this easily by running <code>.freeze()</code> on the render context, which you can access with <code>perseus::get_render_ctx!()</code>. Best of all, if state hasn't been used yet (e.g. a page hasn't been visited), it won't be cached, because it doesn't need to be. That also applies to global state, meaning the size of your frozen output is minimized.</p>
<h2>Example</h2>
<p>You can easily imperatively instruct your app to freeze itself like so (see <a href="https://github.com/arctic-hen7/perseus/tree/main/examples/rx_state/src/index.rs">here</a>):</p>
<pre><code class="language-rust">use perseus::state::Freeze;
use perseus::{Html, RenderFnResultWithCause, Template};
use sycamore::prelude::*;

use crate::global_state::AppStateRx;

// We define a normal `struct` and then use `make_rx` (which derives `Serialize`, `Deserialize`, and `Clone` automatically)
// This will generate a new `struct` called `IndexPropsRx` (as we asked it to), in which every field is made reactive with a `Signal`
#[perseus::make_rx(IndexPropsRx)]
pub struct IndexProps {
    pub username: String,
}

// This special macro (normally we'd use `template(IndexProps)`) converts the state we generate elsewhere to a reactive version
// We need to tell it the name of the unreactive properties we created to start with (unfortunately the compiler isn't smart enough to figure that out yet)
// This will also add our reactive properties to the global state store, and, if they're already there, it'll use the existing one
#[perseus::template_rx(IndexPage)]
pub fn index_page(IndexPropsRx { username }: IndexPropsRx, global_state: AppStateRx) -&gt; View&lt;G&gt; {
    let username_2 = username.clone(); // This is necessary until Sycamore's new reactive primitives are released
    let frozen_app = Signal::new(String::new()); // This is not part of our data model, so it's not part of the state properties (everything else should be though)
    let frozen_app_2 = frozen_app.clone();
    let frozen_app_3 = frozen_app.clone();
    let render_ctx = perseus::get_render_ctx!();

    view! {
        p { (format!(&quot;Greetings, {}!&quot;, username.get())) }
        input(bind:value = username_2, placeholder = &quot;Username&quot;)
        p { (global_state.test.get()) }

        // When the user visits this and then comes back, they'll still be able to see their username (the previous state will be retrieved from the global state automatically)
        a(href = &quot;about&quot;) { &quot;About&quot; }
        br()

        button(on:click = cloned!(frozen_app, render_ctx =&gt; move |_| {
            frozen_app.set(render_ctx.freeze());
        })) { &quot;Freeze!&quot; }
        p { (frozen_app.get()) }

        input(bind:value = frozen_app_2, placeholder = &quot;Frozen state&quot;)
        button(on:click = cloned!(frozen_app_3, render_ctx =&gt; move |_| {
            render_ctx.thaw(&amp;frozen_app_3.get(), perseus::state::ThawPrefs {
                page: perseus::state::PageThawPrefs::IncludeAll,
                global_prefer_frozen: true
            }).unwrap();
        })) { &quot;Thaw...&quot; }
    }
}

pub fn get_template&lt;G: Html&gt;() -&gt; Template&lt;G&gt; {
    Template::new(&quot;index&quot;)
        .build_state_fn(get_build_state)
        .template(index_page)
}

#[perseus::autoserde(build_state)]
pub async fn get_build_state(
    _path: String,
    _locale: String,
) -&gt; RenderFnResultWithCause&lt;IndexProps&gt; {
    Ok(IndexProps {
        username: &quot;&quot;.to_string(),
    })
}

</code></pre>
<h2>Thawing</h2>
<p>Recovering your app's state from a frozen state is called <em>thawing</em> in Perseus (basically like hydration for state, but remember that hydration is for views and thawing is for state!), and it can occur gradually and automatically once you provide Perseus a frozen state to use, which you can do by calling <code>.thaw()</code> on the render context (which you can get with <code>perseus::get_render_ctx!()</code>). How you store and retrieve frozen state is entirely up to you. For example, you could store the user's last state in a database and then fetch that when the user logs in, or you could store it in IndexedDB and have even logging in be covered by it (if authentication tokens are part of your global state).</p>
<p>One important thing to understand about thawing though is how Perseus decided what state to use for a template, because there can be up to three options. Every template that accepts state will have generated state that's provided to it from the generation proceses on the server, but there could also be a frozen state and an active state (some state that's already been made reactive). The server-generated state is always the lowest priority, and it will be used if no active or frozen state is available. However, deciding between frozen and active state is more complicated. If only one is available, it will of course be used, but it both are available, the choice is yours. You can represent this choice through the <code>ThawPrefs</code> <code>struct</code>, which must be provided to a call to <code>.thaw()</code> as the second argument. This has two fields, one for page state, and another for global state. For global state, you can set the <code>global_prefers_frozen</code> field to <code>true</code> if you want to override active global state with a frozen one. For page state, you'll use <code>PageThawPrefs</code>, which can be set to <code>IncludeAll</code> (all pages will prefer frozen state), <code>Include(Vec&lt;String&gt;)</code> (the listed pages will prefer frozen state, all others will prefer active state), or <code>Exclude(Vec&lt;String&gt;)</code> (the listed pages will prefer active state, all others will prefer frozen state). There's no <code>ExcludeAll</code> option because that would defeat the entire purpose of thawing.</p>
<p>It may at first be tempting to use <code>IncludeAll</code>, but this is an important UX decision that you should consider carefully. Using frozen state when active state isn't available is automatic, but preferring frozen state <em>over</em> active state translates to something like this: a user does some stuff, then state is thawed, everything they did at the start is gone and replaced with whatever they did in the previous session. This might be entirely reasonable in pages that can only be accessed after thawing is complete, but in pages that are accessible at all times, this could be extremely irritating to your users!</p>
<details>
<summary>Thawing isn't working...</summary>
<p>It may seem sometimes like thawing has completely failed, and this is usually for one of two reasons.</p>
<ol>
<li>You're extracting the state of another page.</li>
<li>You're getting the global state without having it as the second argument to your template function. (In other words, you're getting it manually through <code>perseus::get_render_ctx!().global_state.borrow()</code>).</li>
</ol>
<p>In the first case, the reasoning is simple. Statw thawing is a gradual process, so the state for a page won't be thawed until the user actually visits that page. This is why it's much better to use global state for state that needs to be shared between pages, and you should generally avoid extracting state from other pages.</p>
<p>In the second case, the reason is similar. When you get the global state directly in this way, you bypass the thawing process altogether, meaning thawed state won't show up. If you need to access the global state, you should do it by making it the second argument to your template function (as documented <a href="https://arctic-hen7.github.io/perseus/en-US/docs/next/reference/state/global">here</a>).</p>
<p><em>Note: in a future version of Perseus, thawing logic may be moved so that direct access does become possible, but it's currently not.</em></p>
</details>
<p><em>Note: currently, Perseus' thawing process requires navigating to another page to work due to problems in Sycamore's router. These will be resolved in some form before v0.3.3.</em></p>
</div></main></div></div></div></div><footer class="w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep" data-hk="3.28"><p data-hk="3.29" class="dark:text-white mx-5 text-center"><span data-hk="3.30">© <a href="https://github.com/arctic-hen7" class="underline">arctic-hen7</a> ⁨2021⁩, see license <a href="https://github.com/arctic-hen7/perseus/blob/main/LICENSE" class="underline">here</a>.</span></p></footer><script data-hk="2.1" defer="" src=".perseus/static/prism.js"></script><script data-hk="2.2">window.Prism.highlightAll();</script></div></div>
    </body>
</html>
