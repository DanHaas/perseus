{"content":"<header class=\"shadow-md sm:p-2 w-full bg-white dark:text-white dark:bg-navy mb-20\" data-hk=\"3.0\"><div data-hk=\"3.1\" class=\"flex justify-between\"><a class=\"justify-self-start self-center m-3 ml-5 text-md sm:text-2xl\" href=\"en-US/\" data-hk=\"3.2\">Perseus</a><div class=\"md:hidden m-3 mr-5 tham tham-e-spin tham-w-6 \" data-hk=\"3.3\"><div data-hk=\"3.4\" class=\"tham-box\"><div data-hk=\"3.5\" class=\"dark:bg-white tham-inner\"></div></div></div><nav data-hk=\"3.6\" class=\"hidden md:flex\"><ul class=\"mr-5 flex\" data-hk=\"3.7\"><li data-hk=\"4.0\" class=\"m-3 p-1\"><a class=\"px-2\" data-hk=\"4.1\" href=\"en-US/docs\">Docs</a></li><li class=\"m-3 p-1\" data-hk=\"4.2\"><a data-hk=\"4.3\" href=\"en-US/comparisons\" class=\"px-2\">Comparisons</a></li><li class=\"m-3 p-1\" data-hk=\"4.4\"><a href=\"en-US/plugins\" data-hk=\"4.5\" class=\"px-2\">Plugins</a></li></ul></nav></div><nav class=\"md:hidden w-full text-center justify-center overflow-y-scroll hidden\" id=\"mobile_nav_menu\" data-hk=\"3.8\"><div style=\"max-height: 500px\" data-hk=\"3.9\" class=\"mr-5 overflow-y-scroll\"><ul data-hk=\"3.10\"><li data-hk=\"5.0\" class=\"m-3 p-1\"><a class=\"px-2\" href=\"en-US/docs\" data-hk=\"5.1\">Docs</a></li><li data-hk=\"5.2\" class=\"m-3 p-1\"><a href=\"en-US/comparisons\" data-hk=\"5.3\" class=\"px-2\">Comparisons</a></li><li class=\"m-3 p-1\" data-hk=\"5.4\"><a href=\"en-US/plugins\" class=\"px-2\" data-hk=\"5.5\">Plugins</a></li></ul><hr data-hk=\"3.11\"/><div class=\"text-left p-3\" data-hk=\"3.12\"><!--#--><!----><select data-hk=\"6.0\" class=\"p-2 rounded-md text-white bg-indigo-500\"><option value=\"next\" data-hk=\"6.1\">Next (unreleased)</option><!--#--><!--/--><option selected=\"\" value=\"0.3.x\" data-hk=\"6.2\">v⁨0.3.x⁩ (stable)</option><!--#--><option value=\"0.2.x\" data-hk=\"6.3\">v⁨0.2.x⁩ (outdated)</option><option data-hk=\"6.4\" value=\"0.1.x\">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk=\"3.13\" class=\"docs-links-markdown\"><h1>Introduction</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro\">Introduction</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus\">What is Perseus?</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world\">Hello World!</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app\">Your Second App</a></li>\n</ul>\n<hr />\n<h1>Reference</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app\"><code>define_app!</code></a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views\">Writing Views</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging\">Debugging</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro\">Templates and Routing</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification\">Modifying the <code>&lt;head&gt;</code></a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers\">Modifying HTTP Headers</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages\">Error Pages</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\">Static Content</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro\">Internationalization</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining\">Defining Translations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using\">Using Translations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers\">Translations Managers</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines\">Other Translation Engines</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro\">Rendering Strategies</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state\">Build State</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths\">Build Paths</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\">Request State</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation\">Revalidation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental\">Incremental Generation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation\">State Amalgamation</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration\">Hydration</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli\">CLI</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting\">Ejecting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping\">Snooping</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro\">Testing</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints\">Checkpoints</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics\">Fantoccini Basics</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual\">Manual Testing</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling\">Styling</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication\">Communicating with a Server</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores\">Stores</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\">Static Exporting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro\">Plugins</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional\">Functional Actions</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control\">Control Actions</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using\">Using Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker\">The <code>tinker</code> Action</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing\">Writing Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security\">Security Considerations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing\">Publishing Plugins</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro\">Deploying</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful\">Server Deployment</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless\">Serverless Deployment</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size\">Optimizing Code Size</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths\">Relative Paths</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/docker\">Docker Deployment</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating\">Migrating from v0.2.x</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs\">Common Pitfalls and Known Bugs</a></li>\n</ul>\n<hr />\n<h1>Advanced</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro\">Under the Hood</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch\">Architecture</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads\">Initial Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads\">Subsequent Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing\">Routing</a></li>\n</ul>\n</li>\n</ul>\n</div></div></div></nav></header><div data-hk=\"3.14\" class=\"mt-14 xs:mt-16 sm:mt-20 lg:mt-25 overflow-y-auto flex\"><div data-hk=\"3.15\" class=\"flex w-full\"><div data-hk=\"3.16\" class=\"h-full hidden md:block max-w-xs w-full border-r\"><div class=\"mr-5\" data-hk=\"3.17\"><div class=\"text-left text-black dark:text-white p-3\" data-hk=\"3.18\"><aside data-hk=\"3.19\"><!--#--><!----><select data-hk=\"7.0\" class=\"p-2 rounded-md text-white bg-indigo-500\"><option data-hk=\"7.1\" value=\"next\">Next (unreleased)</option><!--#--><!--/--><option value=\"0.3.x\" selected=\"\" data-hk=\"7.2\">v⁨0.3.x⁩ (stable)</option><!--#--><option value=\"0.2.x\" data-hk=\"7.3\">v⁨0.2.x⁩ (outdated)</option><option value=\"0.1.x\" data-hk=\"7.4\">v⁨0.1.x⁩ (outdated)</option><!--/--></select><!--/--><div data-hk=\"3.20\" class=\"docs-links-markdown\"><h1>Introduction</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro\">Introduction</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus\">What is Perseus?</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world\">Hello World!</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app\">Your Second App</a></li>\n</ul>\n<hr />\n<h1>Reference</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app\"><code>define_app!</code></a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views\">Writing Views</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging\">Debugging</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro\">Templates and Routing</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification\">Modifying the <code>&lt;head&gt;</code></a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers\">Modifying HTTP Headers</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages\">Error Pages</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\">Static Content</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro\">Internationalization</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining\">Defining Translations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using\">Using Translations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers\">Translations Managers</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines\">Other Translation Engines</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro\">Rendering Strategies</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state\">Build State</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths\">Build Paths</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\">Request State</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation\">Revalidation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental\">Incremental Generation</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation\">State Amalgamation</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration\">Hydration</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli\">CLI</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting\">Ejecting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping\">Snooping</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro\">Testing</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints\">Checkpoints</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics\">Fantoccini Basics</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual\">Manual Testing</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling\">Styling</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication\">Communicating with a Server</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores\">Stores</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\">Static Exporting</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro\">Plugins</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional\">Functional Actions</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control\">Control Actions</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using\">Using Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker\">The <code>tinker</code> Action</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing\">Writing Plugins</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security\">Security Considerations</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing\">Publishing Plugins</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro\">Deploying</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful\">Server Deployment</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless\">Serverless Deployment</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size\">Optimizing Code Size</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths\">Relative Paths</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/docker\">Docker Deployment</a></li>\n</ul>\n</li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating\">Migrating from v0.2.x</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs\">Common Pitfalls and Known Bugs</a></li>\n</ul>\n<hr />\n<h1>Advanced</h1>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro\">Under the Hood</a>\n<ul>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch\">Architecture</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads\">Initial Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads\">Subsequent Loads</a></li>\n<li><a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing\">Routing</a></li>\n</ul>\n</li>\n</ul>\n</div></aside></div></div></div><div data-hk=\"3.21\" class=\"h-full flex w-full\"><div data-hk=\"3.22\" class=\"px-3 w-full sm:mr-auto sm:ml-auto sm:max-w-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl\"><!--#--><!----><!--/--><main data-hk=\"3.23\" class=\"text-black dark:text-white\"><div data-hk=\"2.0\" class=\"markdown\"><h1>Communicating with a Server</h1>\n<p>So far, we've described how to use Perseus to build powerful and performant frontend apps, but we've mostly left out the backend. If you want to fetch data from a database, authenticate users, perform server-side calculations or the like, you'll almost certainly want a backend of some kind.</p>\n<details>\n<summary>Frontend? Backend?</summary>\n<p>In web development, we typically refer to a project as having a <em>frontend</em>, which is the thing users see (i.e. your web app, with all its styling and the like), and a <em>backend</em>, which is a server or serverless function (see below) that performs server-side work. A classic example would be a server that communicates with a database to fetch some data, but it needs to authenticate against the database. If you're new to web dev, you might well be thinking we could just query the database from the web app, but that would mean we'd have to store the access token in our frontend code, which can be easily inspected by the user (albeit less easily with Wasm, but still definitely doable). For that reason, we communicate with a server and ask it to get the data from the database for us.</p>\n<p>Of course, a much simpler way of doing the above would be to make the database not need authentication in the first place, but the point stands.</p>\n</details>\n<h2>The Perseus Server</h2>\n<p>Perseus has an inbuilt server that serves your app and its data, and this can be extended by your own code. However, this requires <a href=\"/docs/ejecting\">ejecting</a>, which can be brittle, because you'll have to redo everything every time there's a major update.</p>\n<h2>Your Own Server</h2>\n<p>Instead, it's recommended that you create a server separate from Perseus that you control completely. You might do this with <a href=\"https://actix.rs\">Actix Web</a> or similar software.</p>\n<h3>Serverless Functions</h3>\n<p>In the last few years, a new technology has sprung up that allows you to run individual <em>functions</em> (which might be single API routes) whenever they're requested. Infinitely many functions can be spawned simultaneously, and none will be active if none are being requested, which significantly reduces costs and increases scalability. This is provided by services like <a href=\"https://aws.amazon.com/lambda/\">AWS Lambda</a>, and can be used with Rust via <a href=\"https://docs.rs/netlify_lambda_http\">this library</a>. </p>\n<h2>Querying a Server</h2>\n<h3>At Build-Time</h3>\n<p>It's fairly trivial to communicate with a server at build-time in Perseus, which allows you to fetch data when you build your app, and then your users don't have to do as much work. You can also use other strategies to fetch data <a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\">at request-time</a> if needed. Right now, it's best to use a blocking API to make requests on the server, which you can do with libraries like <a href=\"https://docs.rs/ureq\"><code>ureq</code></a>.</p>\n<h3>In the Browser</h3>\n<p>In some cases, it's just not possible to fetch the data you need on the server, and the client needs to fetch it themselves. This is often the case in <a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\">exported</a> apps. This is typically done with the browser's inbuilt Fetch API, which is conveniently wrapped by <a href=\"https://docs.rs/reqwasm\"><code>reqwasm</code></a>.</p>\n<p>However, if you try to request from a public API in this way, you may run into problems with <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">CORS</a>, which can be very confusing, especially if you're not used to web development! The simple explanation of this is that CORS is a <em>thing</em> that browsers use to make sure your code can't send requests to servers that haven't allowed it (as in your code specifically). If you're querying your own server and getting this problem, make sure to set the <code>Access-Control-Allow-Origin</code> header to allow your site to make requests (see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">here</a> for more details). However, if a public API hasn't set this, you're up the creek! In these cases, it's best to query through your own server or through one of Perseus' rendering strategies (if possible).</p>\n<h2>Example</h2>\n<p>This can be confusing stuff, especially because it's different on the client and the server, so you may want to take a look at <a href=\"https://github.com/arctic-hen7/perseus/tree/main/examples/fetching\">this example</a> in the Perseus repo, which gets the IP address of the machine that built it, and then shows the user a message hosted with a <a href=\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\">static alias</a>.</p>\n</div></main></div></div></div></div><footer data-hk=\"3.24\" class=\"w-full flex justify-center py-5 bg-gray-100 dark:bg-navy-deep\"><p data-hk=\"3.25\" class=\"dark:text-white mx-5 text-center\"><span data-hk=\"3.26\">© <a href=\"https://github.com/arctic-hen7\" class=\"underline\">arctic-hen7</a> ⁨2021⁩, see license <a href=\"https://github.com/arctic-hen7/perseus/blob/main/LICENSE\" class=\"underline\">here</a>.</span></p></footer><script src=\".perseus/static/prism.js\" defer=\"\" data-hk=\"2.1\"></script><script data-hk=\"2.2\">window.Prism.highlightAll();</script>","state":"{\"title\":\"Communicating with a Server\",\"content\":\"<h1>Communicating with a Server</h1>\\n<p>So far, we've described how to use Perseus to build powerful and performant frontend apps, but we've mostly left out the backend. If you want to fetch data from a database, authenticate users, perform server-side calculations or the like, you'll almost certainly want a backend of some kind.</p>\\n<details>\\n<summary>Frontend? Backend?</summary>\\n<p>In web development, we typically refer to a project as having a <em>frontend</em>, which is the thing users see (i.e. your web app, with all its styling and the like), and a <em>backend</em>, which is a server or serverless function (see below) that performs server-side work. A classic example would be a server that communicates with a database to fetch some data, but it needs to authenticate against the database. If you're new to web dev, you might well be thinking we could just query the database from the web app, but that would mean we'd have to store the access token in our frontend code, which can be easily inspected by the user (albeit less easily with Wasm, but still definitely doable). For that reason, we communicate with a server and ask it to get the data from the database for us.</p>\\n<p>Of course, a much simpler way of doing the above would be to make the database not need authentication in the first place, but the point stands.</p>\\n</details>\\n<h2>The Perseus Server</h2>\\n<p>Perseus has an inbuilt server that serves your app and its data, and this can be extended by your own code. However, this requires <a href=\\\"/docs/ejecting\\\">ejecting</a>, which can be brittle, because you'll have to redo everything every time there's a major update.</p>\\n<h2>Your Own Server</h2>\\n<p>Instead, it's recommended that you create a server separate from Perseus that you control completely. You might do this with <a href=\\\"https://actix.rs\\\">Actix Web</a> or similar software.</p>\\n<h3>Serverless Functions</h3>\\n<p>In the last few years, a new technology has sprung up that allows you to run individual <em>functions</em> (which might be single API routes) whenever they're requested. Infinitely many functions can be spawned simultaneously, and none will be active if none are being requested, which significantly reduces costs and increases scalability. This is provided by services like <a href=\\\"https://aws.amazon.com/lambda/\\\">AWS Lambda</a>, and can be used with Rust via <a href=\\\"https://docs.rs/netlify_lambda_http\\\">this library</a>. </p>\\n<h2>Querying a Server</h2>\\n<h3>At Build-Time</h3>\\n<p>It's fairly trivial to communicate with a server at build-time in Perseus, which allows you to fetch data when you build your app, and then your users don't have to do as much work. You can also use other strategies to fetch data <a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\\\">at request-time</a> if needed. Right now, it's best to use a blocking API to make requests on the server, which you can do with libraries like <a href=\\\"https://docs.rs/ureq\\\"><code>ureq</code></a>.</p>\\n<h3>In the Browser</h3>\\n<p>In some cases, it's just not possible to fetch the data you need on the server, and the client needs to fetch it themselves. This is often the case in <a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\\\">exported</a> apps. This is typically done with the browser's inbuilt Fetch API, which is conveniently wrapped by <a href=\\\"https://docs.rs/reqwasm\\\"><code>reqwasm</code></a>.</p>\\n<p>However, if you try to request from a public API in this way, you may run into problems with <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\\\">CORS</a>, which can be very confusing, especially if you're not used to web development! The simple explanation of this is that CORS is a <em>thing</em> that browsers use to make sure your code can't send requests to servers that haven't allowed it (as in your code specifically). If you're querying your own server and getting this problem, make sure to set the <code>Access-Control-Allow-Origin</code> header to allow your site to make requests (see <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\\\">here</a> for more details). However, if a public API hasn't set this, you're up the creek! In these cases, it's best to query through your own server or through one of Perseus' rendering strategies (if possible).</p>\\n<h2>Example</h2>\\n<p>This can be confusing stuff, especially because it's different on the client and the server, so you may want to take a look at <a href=\\\"https://github.com/arctic-hen7/perseus/tree/main/examples/fetching\\\">this example</a> in the Perseus repo, which gets the IP address of the machine that built it, and then shows the user a message hosted with a <a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\\\">static alias</a>.</p>\\n\",\"sidebar_content\":\"<h1>Introduction</h1>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/intro\\\">Introduction</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/what-is-perseus\\\">What is Perseus?</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hello-world\\\">Hello World!</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/second-app\\\">Your Second App</a></li>\\n</ul>\\n<hr />\\n<h1>Reference</h1>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/define-app\\\"><code>define_app!</code></a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/views\\\">Writing Views</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/debugging\\\">Debugging</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/intro\\\">Templates and Routing</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/metadata-modification\\\">Modifying the <code>&lt;head&gt;</code></a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/templates/setting-headers\\\">Modifying HTTP Headers</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/error-pages\\\">Error Pages</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/static-content\\\">Static Content</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/intro\\\">Internationalization</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/defining\\\">Defining Translations</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/using\\\">Using Translations</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/translations-managers\\\">Translations Managers</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/i18n/other-engines\\\">Other Translation Engines</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/intro\\\">Rendering Strategies</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-state\\\">Build State</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/build-paths\\\">Build Paths</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/request-state\\\">Request State</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/revalidation\\\">Revalidation</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/incremental\\\">Incremental Generation</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/strategies/amalgamation\\\">State Amalgamation</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/hydration\\\">Hydration</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/cli\\\">CLI</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/ejecting\\\">Ejecting</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/snooping\\\">Snooping</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/intro\\\">Testing</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/checkpoints\\\">Checkpoints</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/fantoccini-basics\\\">Fantoccini Basics</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/testing/manual\\\">Manual Testing</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/styling\\\">Styling</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/server-communication\\\">Communicating with a Server</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/stores\\\">Stores</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/exporting\\\">Static Exporting</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/intro\\\">Plugins</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/functional\\\">Functional Actions</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/control\\\">Control Actions</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/using\\\">Using Plugins</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/tinker\\\">The <code>tinker</code> Action</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/writing\\\">Writing Plugins</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/security\\\">Security Considerations</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/plugins/publishing\\\">Publishing Plugins</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/intro\\\">Deploying</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverful\\\">Server Deployment</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/serverless\\\">Serverless Deployment</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/size\\\">Optimizing Code Size</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/relative-paths\\\">Relative Paths</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/deploying/docker\\\">Docker Deployment</a></li>\\n</ul>\\n</li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/updating\\\">Migrating from v0.2.x</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/pitfalls-and-bugs\\\">Common Pitfalls and Known Bugs</a></li>\\n</ul>\\n<hr />\\n<h1>Advanced</h1>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/intro\\\">Under the Hood</a>\\n<ul>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/arch\\\">Architecture</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/initial-loads\\\">Initial Loads</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/subsequent-loads\\\">Subsequent Loads</a></li>\\n<li><a href=\\\"https://arctic-hen7.github.io/perseus/en-US/docs/0.3.x/advanced/routing\\\">Routing</a></li>\\n</ul>\\n</li>\\n</ul>\\n\",\"status\":\"Stable\",\"manifest\":{\"stable\":\"0.3.x\",\"outdated\":[\"0.2.x\",\"0.1.x\"],\"beta\":[],\"history_map\":{\"0.3.x\":\"HEAD\",\"0.1.x\":\"v0.1.4\",\"0.2.x\":\"v0.2.3\"}},\"current_version\":\"0.3.x\"}","head":"<title data-hk=\"1.0\">Communicating with a Server | Perseus Docs</title><link rel=\"stylesheet\" href=\".perseus/static/styles/markdown.css\" data-hk=\"1.1\"/><link data-hk=\"1.2\" rel=\"stylesheet\" href=\".perseus/static/styles/docs_links_markdown.css\"/><link data-hk=\"1.3\" rel=\"stylesheet\" href=\".perseus/static/prism.css\"/>"}